(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1942],{31486:(e,t,s)=>{Promise.resolve().then(s.bind(s,75808))},75808:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(20475),r=s(20107),n=s(72167),o=s(574),i=s(42541),c=s(32857),l=s(29475),d=s(91994),u=s(88926);let f={lte:"lte_band",nsa:"nsa_nr5g_band",sa:"nrdc_nr5g_band"},p={lte:"lte_band",nsa:"nsa_nr5g_band",sa:"nr5g_band"},m=()=>{let{toast:e}=(0,c.dj)(),[t,s]=(0,r.useState)({lte:[],nsa:[],sa:[]}),[m,h]=(0,r.useState)({lte:[],nsa:[],sa:[]}),[g,b]=(0,r.useState)(!0),[v,w]=(0,r.useState)(!1),[x,N]=(0,r.useState)(null),[y,_]=(0,r.useState)({lte:!1,nsa:!1,sa:!1}),j=(e,t,s)=>{let a=e.split("\n"),r=s?f[t]:p[t];for(let e of a){let t='"'.concat(r,'"');if(e.includes(t)){let t=e.match(/\"[^\"]+\",(.+)/);if(t&&t[1])return t[1].trim().split(":").map(Number).filter(e=>!isNaN(e))}}return[]};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/profiles/check_status.sh");if(!e.ok)throw Error("Failed to fetch profile status: ".concat(e.statusText));let t=await e.json();if(console.log("Profile Status:",t),"success"===t.status&&t.profile&&"unknown"!==t.profile&&"none"!==t.profile){let e=await fetch("/cgi-bin/quecmanager/profiles/list_profiles.sh");if(e.ok){let s=await e.json();if("success"===s.status&&Array.isArray(s.profiles)){let e=s.profiles.find(e=>e.name===t.profile);if(e){N(e);let t={lte:!!e.lte_bands,nsa:!!e.nsa_nr5g_bands,sa:!!e.sa_nr5g_bands};_(t),console.log("Active Profile:",e),console.log("Controlled Bands:",t)}}}}else N(null),_({lte:!1,nsa:!1,sa:!1})}catch(e){console.error("Error fetching profile data:",e)}})()},[]);let E=async()=>{try{let e=await fetch("/cgi-bin/quecmanager/at_cmd/fetch_data.sh?set=7");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json(),a=t[0].response,r={lte:j(a,"lte",!0),nsa:j(a,"nsa",!0),sa:j(a,"sa",!0)};s(r);let n=t[1].response,o={lte:j(n,"lte",!1),nsa:j(n,"nsa",!1),sa:j(n,"sa",!1)};h(o),b(!1)}catch(t){console.error("Error fetching bands:",t),e({title:"Error",description:"Failed to fetch bands data.",variant:"destructive"}),b(!1)}};(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{if(x){let e={...m},t=!1;if(y.lte&&x.lte_bands){let s=x.lte_bands.split(",").map(Number).filter(e=>!isNaN(e));e.lte=s,t=!0}if(y.nsa&&x.nsa_nr5g_bands){let s=x.nsa_nr5g_bands.split(",").map(Number).filter(e=>!isNaN(e));e.nsa=s,t=!0}if(y.sa&&x.sa_nr5g_bands){let s=x.sa_nr5g_bands.split(",").map(Number).filter(e=>!isNaN(e));e.sa=s,t=!0}t&&h(e)}},[x,y]);let T=(e,t)=>{y[e]||h(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t].sort((e,t)=>e-t)}))},A=async s=>{if(y[s]){e({title:"Profile Controlled",description:"".concat(s.toUpperCase(),' bands are currently managed by profile "').concat(null==x?void 0:x.name,'"'),variant:"destructive"});return}try{w(!0);let a=m[s].join(":");if("nsa"===s){let e=m.sa.join(":"),s=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.nsa,'",').concat(a),!0);if("success"!==s.status)throw Error(s.response||"Failed to lock NSA bands");if(e){let t=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(e),!0);if("success"!==t.status)throw Error(t.response||"Failed to restore SA bands")}else{let e=t.sa.join(":"),s=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(e),!0);if("success"!==s.status)throw Error(s.response||"Failed to set default SA bands")}h(s=>({...s,nsa:m.nsa,sa:e?m.sa:t.sa}))}else{let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p[s],'",').concat(a),!0);if("success"!==e.status)throw Error(e.response||"Failed to lock ".concat(s.toUpperCase()," bands"));h(e=>({...e,[s]:m[s]}))}e({title:"Band Locking",description:"Bands locked successfully."}),setTimeout(E,1e3),w(!1)}catch(a){let t=a instanceof Error?a.message:"Unknown error";console.error("Error locking ".concat(s," bands:"),a),e({title:"Error",description:"Failed to lock ".concat(s.toUpperCase()," bands: ").concat(t),variant:"destructive"}),w(!1)}},S=e=>{y[e]||h(t=>({...t,[e]:[]}))},k=async s=>{if(y[s]){e({title:"Profile Controlled",description:"".concat(s.toUpperCase(),' bands are currently managed by profile "').concat(null==x?void 0:x.name,'"'),variant:"destructive"});return}try{let a=t[s].join(":");if("nsa"===s){let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.nsa,'",').concat(a),!0);if("success"!==e.status)throw Error(e.response||"Failed to reset NSA bands");let t=m.sa.join(":");if(t){let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(t),!0);if("success"!==e.status)throw Error(e.response||"Failed to preserve SA bands")}}else{let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p[s],'",').concat(a),!0);if("success"!==e.status)throw Error(e.response||"Failed to reset ".concat(s.toUpperCase()," bands"))}e({title:"Reset Successful",description:"".concat(s.toUpperCase()," bands reset to default.")}),await E()}catch(a){let t=a instanceof Error?a.message:"Unknown error";console.error("Error resetting ".concat(s," bands:"),a),e({title:"Error",description:"Failed to reset ".concat(s.toUpperCase()," bands: ").concat(t),variant:"destructive"})}},C=e=>{let{title:s,description:r,bandType:c,prefix:u,isProfileControlled:f,profileName:p}=e;return(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{children:s}),(0,a.jsx)(n.BT,{children:r})]}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-md bg-slate-100 dark:bg-slate-800",children:[(0,a.jsx)(l.A,{className:"h-3 w-3",color:"orange"}),(0,a.jsxs)("span",{children:["Profile Controlled by ",p]})]})]})}),(0,a.jsx)(n.Wu,{className:"grid lg:grid-cols-8 md:grid-cols-6 sm:grid-cols-4 grid-cols-3 grid-flow-row gap-4",children:g?(0,a.jsx)("div",{className:"col-span-8",children:"Fetching bands..."}):t[c].map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.S,{id:"".concat(c,"-").concat(e),checked:m[c].includes(e),onCheckedChange:()=>T(c,e),disabled:f,className:f?"cursor-not-allowed opacity-60":""}),(0,a.jsxs)("label",{htmlFor:"".concat(c,"-").concat(e),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ".concat(f?"cursor-not-allowed opacity-60":""),children:[u,e]})]},e))}),(0,a.jsxs)(n.wL,{className:"border-t py-4 grid grid-flow-row md:grid-cols-3 grid-cols-1 gap-3",children:[(0,a.jsxs)(i.$,{onClick:()=>A(c),disabled:f||g||v,children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Lock Selected Bands"]}),(0,a.jsx)(i.$,{variant:"secondary",onClick:()=>S(c),disabled:f||g||v,children:"Uncheck All"}),(0,a.jsxs)(i.$,{variant:"secondary",onClick:()=>k(c),disabled:f||g||v,children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),"Reset to Default"]})]})]})};return(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(C,{title:"4G LTE Band Locking",description:"Lock the device to specific LTE bands.",bandType:"lte",prefix:"B",isProfileControlled:y.lte,profileName:(null==x?void 0:x.name)||""}),(0,a.jsx)(C,{title:"NR5G-NSA Band Locking",description:"Lock the device to specific NR5G-NSA bands.",bandType:"nsa",prefix:"N",isProfileControlled:y.nsa,profileName:(null==x?void 0:x.name)||""}),(0,a.jsx)(C,{title:"NR5G-SA Band Locking",description:"Lock the device to specific NR5G-SA bands.",bandType:"sa",prefix:"N",isProfileControlled:y.sa,profileName:(null==x?void 0:x.name)||""})]})}},42541:(e,t,s)=>{"use strict";s.d(t,{$:()=>l,r:()=>c});var a=s(20475),r=s(20107),n=s(61837),o=s(29395),i=s(22250);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,size:o,asChild:l=!1,...d}=e,u=l?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(c({variant:r,size:o,className:s})),ref:t,...d})});l.displayName="Button"},72167:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>i,wL:()=>u});var a=s(20475),r=s(20107),n=s(22250);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});l.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},574:(e,t,s)=>{"use strict";s.d(t,{S:()=>c});var a=s(20475),r=s(20107),n=s(32713),o=s(7197),i=s(22250);let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(o.Srz,{className:"h-4 w-4"})})})});c.displayName=n.bL.displayName},32857:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f,oR:()=>u});var a=s(20107);let r=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=i(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=a.useState(l);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(64901),r=s(868);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},88926:(e,t,s)=>{"use strict";s.d(t,{a:()=>a});let a=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{let s=e.trim().toUpperCase().startsWith("AT")?e.trim():"AT".concat(e.trim()),a=encodeURIComponent(s),r="/cgi-bin/quecmanager/at_cmd/at_queue_client.sh?command=".concat(a);30!==t&&(r+="&timeout=".concat(t));let n=await fetch(r,{method:"GET",headers:{Accept:"application/json",Authorization:"".concat(localStorage.getItem("authToken"))},signal:AbortSignal.timeout(1e3*t+5e3)});if(!n.ok)throw Error("AT command failed with status: ".concat(n.status));let o=await n.json();if(o.error)throw Error("AT queue error: ".concat(o.error));if("error"===o.status)throw Error("AT command failed: ".concat(o.response||"Unknown error"));return o}catch(e){throw console.error("AT Command error:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[9980,7780,2494,191,6035,7358],()=>t(31486)),_N_E=e.O()}]);