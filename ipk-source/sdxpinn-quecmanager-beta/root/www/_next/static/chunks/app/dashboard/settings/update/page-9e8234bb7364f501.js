(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8529],{38224:(e,t,a)=>{Promise.resolve().then(a.bind(a,95593))},95593:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var r=a(20475),s=a(20107),n=a(72167);let i=(0,a(39997).A)("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);var l=a(59166),c=a(97801),o=a(42541),d=a(29395),u=a(22250);function f(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"empty",className:(0,u.cn)("flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12",t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"empty-header",className:(0,u.cn)("flex max-w-sm flex-col items-center gap-2 text-center",t),...a})}let h=(0,d.F)("mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",icon:"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6"}},defaultVariants:{variant:"default"}});function m(e){let{className:t,variant:a="default",...s}=e;return(0,r.jsx)("div",{"data-slot":"empty-icon","data-variant":a,className:(0,u.cn)(h({variant:a,className:t})),...s})}function g(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"empty-title",className:(0,u.cn)("text-lg font-medium tracking-tight",t),...a})}function x(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"empty-description",className:(0,u.cn)("text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"empty-content",className:(0,u.cn)("flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm",t),...a})}var j=a(32857),y=a(36760);let b=()=>{let[e,t]=(0,s.useState)(null),[a,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[b,w]=(0,s.useState)(!1),[k,N]=(0,s.useState)(null),{toast:A}=(0,j.dj)(),T=async()=>{A({title:"Checking for Updates",description:"Please wait..."});try{let e=await fetch("/cgi-bin/quecmanager/settings/check_package_info.sh"),a=await e.json();"success"===a.status?(t(a),N(null)):N(a.message||"Failed to fetch package information")}catch(e){N("Network error: Unable to fetch package information"),console.error("Error fetching package info:",e)}finally{d(!1)}},E=async()=>{h(!0);try{A({title:"Checking for Updates",description:"Fetching the latest package information..."});let e=await fetch("/cgi-bin/quecmanager/settings/update_package_list.sh"),t=await e.json();"success"===t.status?(A({title:"Package List Updated",description:"Package list has been successfully updated."}),await T()):A({title:"Update Check Failed",description:t.message||"Failed to update package list",variant:"destructive"})}catch(e){A({title:"Error",description:"Failed to check for updates",variant:"destructive"}),console.error("Error checking for updates:",e)}finally{h(!1)}},_=async()=>{if(null==e?void 0:e.available.update_available){w(!0);try{A({title:"Upgrading",description:"QuecManager is being upgraded. Please wait patiently..."});let t=await fetch("/cgi-bin/quecmanager/settings/upgrade_package.sh"),a=await t.json();"success"===a.status?(A({title:"Upgrade Successful",description:"QuecManager has been upgraded to version ".concat(e.available.version,". The page will now refresh.")}),setTimeout(()=>{window.location.reload()},3e3)):setTimeout(()=>{window.location.reload()},2e3)}catch(e){console.error("Error upgrading package:",e)}finally{w(!1)}}};return((0,s.useEffect)(()=>{T(),k&&A({title:"Error",description:k,variant:"destructive"})},[]),a)?(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"QuecManager Update"}),(0,r.jsx)(n.BT,{children:"Keep your QuecManager up to date with the latest features and improvements."})]}),(0,r.jsx)(n.Wu,{className:"flex items-center justify-center py-8",children:(0,r.jsx)(y.E,{className:"h-64 w-full"})})]}):(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{className:"flex items-center gap-2",children:"QuecManager Update"}),(0,r.jsx)(n.BT,{children:"Keep your QuecManager up to date with the latest features and improvements."})]}),(0,r.jsx)(n.Wu,{children:(null==e?void 0:e.available.update_available)?(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(f,{className:"from-muted/50 to-background h-full bg-gradient-to-b from-30%",children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(m,{variant:"icon",children:(0,r.jsx)(i,{className:"text-primary"})}),(0,r.jsx)(g,{children:"New Update Available"}),(null==e?void 0:e.installed.type)==="beta"?(0,r.jsxs)(x,{children:["A new version of QuecManager ",(0,r.jsx)("strong",{children:"BETA"})," is available."]}):(0,r.jsxs)(x,{children:["A new version of QuecManager ",(0,r.jsx)("strong",{children:"STABLE"})," is available."]}),(0,r.jsxs)(x,{children:["Update from ",(0,r.jsx)("strong",{className:"text-blue-500",children:null==e?void 0:e.installed.version})," ","to"," ",(0,r.jsx)("strong",{className:"text-green-500",children:null==e?void 0:e.available.version}),"."]})]}),(0,r.jsx)(v,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.$,{onClick:_,disabled:b,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"animate-spin"}),"Upgrading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i,{}),"Install Update"]})}),(0,r.jsx)(o.$,{variant:"outline",onClick:E,disabled:u,children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"animate-spin"}),"Checking..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{}),"Check Again"]})})]})})]})}):(0,r.jsxs)(f,{className:"from-muted/50 to-background h-full bg-gradient-to-b from-30%",children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(m,{variant:"icon",children:(0,r.jsx)(i,{})}),(0,r.jsx)(g,{children:"No Updates Available"}),(0,r.jsxs)(x,{children:["You are running the latest version of QuecManager. Your current version is ","",(null==e?void 0:e.installed.version)?(0,r.jsxs)("strong",{className:"text-blue-500",children:[e.installed.version,"beta"===e.installed.type?(0,r.jsx)("span",{className:"ml-1",children:"BETA"}):(0,r.jsx)("span",{className:"ml-1",children:"STABLE"})]}):(0,r.jsx)(y.E,{className:"ml-1 h-3 w-12 inline-block"}),"."]})]}),(0,r.jsx)(v,{children:(0,r.jsx)(o.$,{onClick:E,disabled:u,children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"animate-spin"}),"Checking..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{}),"Check for Updates"]})})})]})})]})}},42541:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>c});var r=a(20475),s=a(20107),n=a(61837),i=a(29395),l=a(22250);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:s,size:i,className:a})),ref:t,...d})});o.displayName="Button"},72167:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l,wL:()=>u});var r=a(20475),s=a(20107),n=a(22250);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},36760:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var r=a(20475),s=a(22250);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},32857:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f,oR:()=>u});var r=a(20107);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(o);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(64901),s=a(868);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},39997:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(20107);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...f}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:c?24*Number(l)/Number(s):l,className:n("lucide",o),...f},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:c,...o}=a;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return a.displayName="".concat(e),a}},59166:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(39997).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},97801:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(39997).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},29395:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,s=function(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t))for(a=0;a<t.length;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r);else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(r&&(r+=" "),r+=t);return r},n=(e,t)=>a=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],s=null==l?void 0:l[e];if(null===t)return null;let n=r(t)||r(s);return i[e][n]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return s(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...l,...o}[t]):({...l,...o})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}},e=>{var t=t=>e(e.s=t);e.O(0,[7780,191,6035,7358],()=>t(38224)),_N_E=e.O()}]);