(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6665],{98722:(e,s,t)=>{Promise.resolve().then(t.bind(t,42988))},42988:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eK});var l=t(20475),r=t(20107),n=t(32857),a=t(72167),i=t(36760),c=t(45934);let o=e=>{let{data:s,isLoading:t,hideSensitiveData:r}=e;return(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{children:"Sim Card"}),(0,l.jsx)(a.BT,{children:"Sim card information"})]}),(0,l.jsxs)(a.Wu,{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Sim Card Slot in Use"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[50px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.slot})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Sim Card State"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat((null==s?void 0:s.simCard.state)==="Inserted"?"bg-emerald-500 hover:bg-emerald-800":"bg-rose-500 hover:bg-rose-800"),children:null==s?void 0:s.simCard.state})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Provider"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.provider})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Phone Number"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[140px]"}):r?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.phoneNumber})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"IMSI"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[140px]"}):r?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.imsi})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"ICCID"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[140px]"}):r?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.iccid})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"IMEI"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[140px]"}):r?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.simCard.imei})]})]})]})},d={6:"1.4 MHz",15:"3 MHz",25:"5 MHz",50:"10 MHz",75:"15 MHz",100:"20 MHz"},m={0:"5 MHz",1:"10 MHz",2:"15 MHz",3:"20 MHz",4:"25 MHz",5:"30 MHz",6:"40 MHz",7:"50 MHz",8:"60 MHz",9:"70 MHz",10:"80 MHz",11:"90 MHz",12:"100 MHz",13:"200 MHz",14:"400 MHz",15:"35 MHz",16:"45 MHz"},u={2:"UTRAN",4:"HSDPA",5:"HSUPA",6:"HSDPA & HSUPA",7:"E-UTRAN",10:"E-UTRAN - 5GCN",11:"NR - 5GCN",12:"NG-RAN",13:"E-UTRAN-NR Dual"},x=e=>u[e]||"Unknown",h=e=>{let{data:s,isLoading:t,dataConnectionState:r,connectionStateLoading:n}=e;return(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{children:"Connection"}),(0,l.jsx)(a.BT,{children:"Connection information"})]}),(0,l.jsxs)(a.Wu,{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"APN"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("div",{className:"font-bold",children:null==s?void 0:s.connection.apn})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Operator State"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat((null==s?void 0:s.connection.operatorState)==="Unknown"||(null==s?void 0:s.connection.operatorState)==="Denied"||(null==s?void 0:s.connection.operatorState)==="Not Registered"?"bg-rose-500 hover:bg-rose-800":"bg-emerald-500 hover:bg-emerald-800"),children:null==s?void 0:s.connection.operatorState})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Functionality State"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat((null==s?void 0:s.connection.functionalityState)==="Enabled"?"bg-emerald-500 hover:bg-emerald-800":"bg-rose-500 hover:bg-rose-800"),children:null==s?void 0:s.connection.functionalityState})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Data Connection State"}),n?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat("Connected"===r?"bg-emerald-500 hover:bg-emerald-800":"Ping Active"===r?"bg-blue-500 hover:bg-blue-800":"bg-rose-500 hover:bg-rose-800"),children:r})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Network Type"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("div",{className:"font-bold",children:null==s?void 0:s.connection.networkType})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Modem Temperature"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("div",{className:"font-bold",children:null==s?void 0:s.connection.modemTemperature})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("div",{children:"Access Technology"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("div",{className:"font-bold",children:(null==s?void 0:s.connection.accessTechnology)?x(s.connection.accessTechnology):"Unknown"})]})]})]})},p=e=>{let{data:s,isLoading:t,bytesSent:r,bytesReceived:n}=e;return(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{children:"Data Transmission"}),(0,l.jsx)(a.BT,{children:"Data transmission information"})]}),(0,l.jsxs)(a.Wu,{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Carrier Aggregation"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat((null==s?void 0:s.dataTransmission.carrierAggregation)==="Multi"?"bg-emerald-500 hover:bg-emerald-800":"bg-rose-500 hover:bg-rose-800"),children:null==s?void 0:s.dataTransmission.carrierAggregation})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Bandwidth"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.dataTransmission.bandwidth})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Connected Bands"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.dataTransmission.connectedBands})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Signal Strength"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[100px]"}):(0,l.jsx)(c.E,{className:"font-bold ".concat((null==s?void 0:s.dataTransmission.signalStrength)&&parseInt(null==s?void 0:s.dataTransmission.signalStrength)>80?"bg-emerald-500 hover:bg-emerald-800":(null==s?void 0:s.dataTransmission.signalStrength)&&parseInt(null==s?void 0:s.dataTransmission.signalStrength)>40?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800"),children:null==s?void 0:s.dataTransmission.signalStrength})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"MIMO Layers"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.dataTransmission.mimoLayers})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Bytes Sent"}),(0,l.jsx)("p",{className:"font-bold",children:r})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Bytes Received"}),(0,l.jsx)("p",{className:"font-bold",children:n})]})]})]})};var g=t(85014);let v=e=>{let{data:s,isLoading:t}=e;return(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{children:"Cellular Information"}),(0,l.jsx)(a.BT,{children:"Cellular network information"})]}),(0,l.jsxs)(a.Wu,{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Cell ID"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.cellId})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{children:"TAC"}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 gap-1",children:(0,l.jsx)("span",{className:"font-medium",children:"Region / Tracking Area Code"})})})]})}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.trackingAreaCode})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Physical Cell IDs"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.physicalCellId})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"E/ARFCN"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.earfcn})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Mobile Country Code"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.mcc})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Mobile Network Code"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[80px]"}):(0,l.jsx)("p",{className:"font-bold",children:null==s?void 0:s.cellularInfo.mnc})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-between text-md",children:[(0,l.jsx)("p",{children:"Antenna Signal Quality"}),t?(0,l.jsx)(i.E,{className:"h-6 w-[80px]"}):(0,l.jsx)(c.E,{className:"\n                font-bold ".concat((null==s?void 0:s.cellularInfo.signalQuality)&&parseInt(null==s?void 0:s.cellularInfo.signalQuality)>80?"bg-emerald-500 hover:bg-emerald-800":(null==s?void 0:s.cellularInfo.signalQuality)&&parseInt(null==s?void 0:s.cellularInfo.signalQuality)>40?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800"),children:null==s?void 0:s.cellularInfo.signalQuality})]})]})]})};var f=t(1307),j=t(53134),N=t(94005),w=t(4538),b=t(41797),y=t(79492);let S={signal:{label:"LTE/5G Signal Metrics"},rsrp:{label:"RSRP",color:"hsl(var(--chart-1))"},rsrq:{label:"RSRQ",color:"hsl(var(--chart-2))"},sinr:{label:"SINR",color:"hsl(var(--chart-3))"}},A=e=>{let s=e.split("\n").filter(e=>e.trim()),t=[];s.forEach(e=>{let s=e.match(/-?\d+/g);s&&t.push(...s.map(Number))});let l=t.filter(e=>-140!==e&&-32768!==e);return 0===l.length?0:Math.round(l.reduce((e,s)=>e+s,0)/l.length)},C=()=>{let[e,s]=(0,r.useState)(()=>{let e=new Date;return Array.from({length:5},(s,t)=>({time:new Date(e.getTime()-(4-t)*3e3).toISOString(),rsrp:0,rsrq:0,sinr:0}))}),[t,n]=(0,r.useState)("rsrp"),[c,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),u=(0,r.useCallback)(async()=>{try{let e;let t=await fetch("/cgi-bin/quecmanager/home/fetch_signal_metrics.sh");if(!t.ok)throw Error("Failed to fetch signal metrics");try{e=await t.json()}catch(e){throw console.error("Error parsing JSON:",e),Error("Failed to parse signal metrics data")}let l=Math.min(e.rsrp.length,e.rsrq.length,e.sinr.length);if(0===l)throw Error("No signal metrics data available");let r=Array.from({length:l},(s,t)=>({time:e.rsrp[t].datetime,rsrp:A(e.rsrp[t].output),rsrq:A(e.rsrq[t].output),sinr:A(e.sinr[t].output)}));s(r),m(null)}catch(t){console.error("Error fetching metrics:",t),m(t instanceof Error?t.message:"An unknown error occurred");let e=new Date().toISOString();s(s=>{let t=[...s];return t.length>=20&&t.shift(),t.push({time:e,rsrp:0,rsrq:0,sinr:0}),t})}finally{o(!1)}},[]);(0,r.useEffect)(()=>{u();let e=setInterval(u,15e3);return()=>clearInterval(e)},[u]);let x=e.length>0?e[e.length-1]:{rsrp:0,rsrq:0,sinr:0};return d?(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.aR,{children:[(0,l.jsx)(a.ZB,{children:"Error Loading Signal Metrics"}),(0,l.jsx)(a.BT,{children:d})]})}):(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{className:"flex flex-col items-stretch space-y-0 border-b p-0 sm:flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-1 flex-col justify-center gap-1 px-6 py-5 sm:py-6",children:[(0,l.jsx)(a.ZB,{children:"Antenna Port Signal Metrics"}),(0,l.jsx)(a.BT,{children:"Per-port signal values averaged across all active ports"})]}),(0,l.jsx)("div",{className:"flex",children:["rsrp","rsrq","sinr"].map(e=>(0,l.jsxs)("button",{"data-active":t===e,className:"flex flex-1 flex-col justify-center gap-1 border-t px-6 py-4 text-left even:border-l data-[active=true]:bg-muted/50 sm:border-l sm:border-t-0 sm:px-8 sm:py-6",onClick:()=>n(e),children:[(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:S[e].label}),c?(0,l.jsx)(i.E,{className:"lg:h-10 h-6 w-full"}):(0,l.jsx)("span",{className:"text-base font-bold leading-none sm:text-3xl",children:x[e].toFixed(0)})]},e))})]}),(0,l.jsx)(a.Wu,{className:"px-2 sm:p-6",children:(0,l.jsx)(f.at,{config:S,className:"aspect-auto h-[250px] w-full",children:(0,l.jsxs)(j.Q,{accessibilityLayer:!0,data:e,margin:{left:12,right:12},children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"fillRsrp",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"var(--color-rsrp)",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"var(--color-rsrp)",stopOpacity:.1})]}),(0,l.jsxs)("linearGradient",{id:"fillRsrq",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"var(--color-rsrq)",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"var(--color-rsrq)",stopOpacity:.1})]}),(0,l.jsxs)("linearGradient",{id:"fillSinr",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"var(--color-sinr)",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"var(--color-sinr)",stopOpacity:.1})]})]}),(0,l.jsx)(N.d,{vertical:!1}),(0,l.jsx)(w.W,{dataKey:"time",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,l.jsx)(b.h,{hide:!0,domain:(e=>{switch(e){case"rsrp":return[-140,-60];case"rsrq":return[-20,0];case"sinr":return[-10,30];default:return[0,"auto"]}})(t)}),(0,l.jsx)(f.II,{content:(0,l.jsx)(f.Nt,{className:"w-[200px]",nameKey:"metric",labelFormatter:e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})})}),(0,l.jsx)(y.G,{dataKey:t,type:"monotone",stroke:"var(--color-".concat(t,")"),fill:"url(#fill".concat(t.charAt(0).toUpperCase()+t.slice(1),")"),strokeWidth:2,activeDot:{r:4},baseValue:(e=>{switch(e){case"rsrp":return -140;case"rsrq":return -20;case"sinr":return -10;default:return 0}})(t)})]})})}),(0,l.jsxs)(a.wL,{className:"flex-col items-start gap-2 text-sm",children:[(0,l.jsx)("div",{className:"flex gap-2 font-medium leading-none",children:"Displays aggregated signal metrics across all active antenna ports."}),(0,l.jsx)("div",{className:"leading-none text-muted-foreground italic",children:"Higher values indicate better signal quality."})]})]})};var I=t(92867),k=t(32810);let E=e=>"".concat(Math.round(e/1048576)," MB"),T=()=>{let[e,s]=(0,r.useState)(()=>{let e=localStorage.getItem("memoryData");return e?JSON.parse(e):{total:0,used:0,available:0}}),[t,n]=(0,r.useState)({enabled:!0,interval:2,running:!1}),[c,o]=(0,r.useState)(()=>{let e=localStorage.getItem("memoryData");if(!e)return!0;try{let s=JSON.parse(e);return!s||0===s.total}catch(e){return!0}}),[d,m]=(0,r.useState)(()=>{let e=localStorage.getItem("memoryData");if(!e)return!1;try{let s=JSON.parse(e);return s&&s.total>0}catch(e){return!1}}),u=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/memory/fetch_memory.sh",{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();if("success"===t.status&&t.data)return s(t.data),m(!0),localStorage.setItem("memoryData",JSON.stringify(t.data)),!0;return!1}catch(e){return console.error("Failed to fetch memory data:",e),!1}},[]),x=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/memory/memory_service.sh",{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)return null;let s=await e.json();if("success"===s.status&&s.data)return n(s.data),s.data;return null}catch(e){return console.error("Failed to fetch memory config:",e),null}},[]);return(0,r.useEffect)(()=>{let e=null;return(async()=>{let s=await x(),t=localStorage.getItem("memoryData");if(t&&JSON.parse(t).total>0||o(!0),null==s?void 0:s.enabled){await u();let t=Math.max(1e3*(s.interval||2),1e3);console.log("Starting memory polling with ".concat(t,"ms interval (").concat(s.interval,"s from config)")),e=setInterval(u,t)}o(!1)})(),()=>{e&&clearInterval(e)}},[x,u]),(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,l.jsx)(a.ZB,{children:"Memory"}),t.enabled&&t.running?(0,l.jsx)(I.A,{className:"h-4 w-4 text-green-500"}):(0,l.jsx)(k.A,{className:"h-4 w-4 text-red-500"})]}),(0,l.jsx)(a.Wu,{children:c?(0,l.jsx)(i.E,{className:"h-[120px] w-full"}):t.enabled?d?(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 grid-cols-2 grid-flow-row gap-4 col-span-3",children:[(0,l.jsxs)("div",{className:"grid gap-1",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total"}),(0,l.jsx)("span",{className:"text-base font-bold",children:E(e.total)})]}),(0,l.jsxs)("div",{className:"grid gap-1",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Used"}),(0,l.jsx)("span",{className:"text-base font-bold",children:E(e.used)})]}),(0,l.jsxs)("div",{className:"grid gap-1",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Available"}),(0,l.jsx)("span",{className:"text-base font-bold",children:E(e.available)})]})]}):(0,l.jsx)("div",{className:"h-[120px] flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Starting memory monitoring..."})}):(0,l.jsxs)("div",{className:"h-[60px] flex flex-col items-center justify-center",children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Memory monitoring is disabled."}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Enable it in Settings → Personalization"})]})})]})},R={ms:{label:"ms",color:"hsl(var(--chart-4))"}},P=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),M=()=>{let[e,s]=(0,r.useState)(()=>{let e=localStorage.getItem("pingData");return e?JSON.parse(e):[]}),[t,n]=(0,r.useState)(()=>{let e=localStorage.getItem("pingData");if(e){let s=JSON.parse(e);return s.length>0?s[s.length-1].ms:null}return null}),[o,d]=(0,r.useState)({enabled:!0,interval:5,host:"8.8.8.8",running:!1}),[m,u]=(0,r.useState)(()=>{let e=localStorage.getItem("pingData");if(!e)return!0;try{let s=JSON.parse(e);return!s||0===s.length}catch(e){return!0}}),[x,h]=(0,r.useState)(()=>{let e=localStorage.getItem("pingData");if(!e)return!1;try{let s=JSON.parse(e);return s&&s.length>0}catch(e){return!1}}),p=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/ping/fetch_ping.sh",{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();if("success"===t.status&&t.data){let e=t.data;if("number"==typeof e.latency){n(e.latency);let t={time:P(),ms:e.latency,index:0};s(e=>{let s;return s=e.length<5?[...e,t].map((e,s)=>({...e,index:s+1})):[...e.slice(1),t].map((e,s)=>({...e,index:s+1})),localStorage.setItem("pingData",JSON.stringify(s)),s}),h(!0)}return!0}return!1}catch(e){return console.error("Failed to fetch ping data:",e),!1}},[]),g=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/ping/ping_service.sh",{method:"GET",cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)return null;let s=await e.json();if("success"===s.status&&s.data)return d(s.data),s.data;return null}catch(e){return console.error("Failed to fetch ping config:",e),null}},[]);return(0,r.useEffect)(()=>{let e=null;return(async()=>{let s=await g(),t=localStorage.getItem("pingData");if(t&&JSON.parse(t).length>0||u(!0),null==s?void 0:s.enabled){await p();let t=Math.max(1e3*(s.interval||5),1e3);console.log("Starting ping polling with ".concat(t,"ms interval (").concat(s.interval,"s from config)")),e=setInterval(p,t)}u(!1)})(),()=>{e&&clearInterval(e)}},[g,p]),(0,l.jsxs)(a.Zp,{children:[(0,l.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(a.ZB,{children:"Ping Monitoring"}),o.enabled?null!==t?(0,l.jsxs)(c.E,{className:"text-normal font-bold",children:[t," ms"]}):null:(0,l.jsx)(k.A,{className:"h-4 w-4 text-red-500"})]}),(0,l.jsx)(a.Wu,{children:m?(0,l.jsx)(i.E,{className:"h-[200px] w-full"}):o.enabled?x?(0,l.jsx)(f.at,{config:R,children:(0,l.jsxs)(j.Q,{accessibilityLayer:!0,data:e,margin:{top:5,right:10,left:0,bottom:5},children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"fillPing",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"var(--color-ms)",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"var(--color-ms)",stopOpacity:.1})]})}),(0,l.jsx)(N.d,{vertical:!1,stroke:"var(--border)",strokeOpacity:.2}),(0,l.jsx)(w.W,{dataKey:"index",tickLine:!1,axisLine:!1,tickMargin:5,tick:{fontSize:9},ticks:[1,2,3,4,5]}),(0,l.jsx)(b.h,{hide:!1,domain:(()=>{if(0===e.length)return[0,100];let s=e.map(e=>e.ms);return[Math.max(0,Math.min(...s)-5),Math.max(...s)+5]})(),tickLine:!1,axisLine:!1,width:20,tick:{fontSize:10},tickFormatter:e=>"".concat(e)}),(0,l.jsx)(f.II,{cursor:!1,content:(0,l.jsx)(f.Nt,{labelFormatter:(s,t)=>{let l=e.find(e=>e.index===s);return l?"".concat(l.time):s},formatter:(e,s)=>["".concat(e," ms"),"Latency"]})}),(0,l.jsx)(y.G,{dataKey:"ms",type:"monotone",stroke:"var(--color-ms)",strokeWidth:2,fill:"url(#fillPing)",activeDot:{r:4,strokeWidth:0},isAnimationActive:!0,animationDuration:1200,animationEasing:"ease-in-out"})]})}):(0,l.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Starting ping monitoring..."})}):(0,l.jsxs)("div",{className:"h-[200px] flex flex-col items-center justify-center",children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ping monitoring is disabled."}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Enable it in Settings → Personalization"})]})})]})};var D=t(42541),z=t(93557),U=t(97801),L=t(51589),G=t(54385),B=t(14389),F=t(98969),_=t(17799),q=t(92776),O=t.n(q),Z=t(7197),H=t(74043),Q=t(22250);let W=r.createContext(null);function $(){let e=r.useContext(W);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let J=r.forwardRef((e,s)=>{let{orientation:t="horizontal",opts:n,setApi:a,plugins:i,className:c,children:o,...d}=e,[m,u]=(0,H.A)({...n,axis:"horizontal"===t?"x":"y"},i),[x,h]=r.useState(!1),[p,g]=r.useState(!1),v=r.useCallback(e=>{e&&(h(e.canScrollPrev()),g(e.canScrollNext()))},[]),f=r.useCallback(()=>{null==u||u.scrollPrev()},[u]),j=r.useCallback(()=>{null==u||u.scrollNext()},[u]),N=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),f()):"ArrowRight"===e.key&&(e.preventDefault(),j())},[f,j]);return r.useEffect(()=>{u&&a&&a(u)},[u,a]),r.useEffect(()=>{if(u)return v(u),u.on("reInit",v),u.on("select",v),()=>{null==u||u.off("select",v)}},[u,v]),(0,l.jsx)(W.Provider,{value:{carouselRef:m,api:u,opts:n,orientation:t||((null==n?void 0:n.axis)==="y"?"vertical":"horizontal"),scrollPrev:f,scrollNext:j,canScrollPrev:x,canScrollNext:p},children:(0,l.jsx)("div",{ref:s,onKeyDownCapture:N,className:(0,Q.cn)("relative",c),role:"region","aria-roledescription":"carousel",...d,children:o})})});J.displayName="Carousel";let K=r.forwardRef((e,s)=>{let{className:t,...r}=e,{carouselRef:n,orientation:a}=$();return(0,l.jsx)("div",{ref:n,className:"overflow-hidden",children:(0,l.jsx)("div",{ref:s,className:(0,Q.cn)("flex","horizontal"===a?"-ml-4":"-mt-4 flex-col",t),...r})})});K.displayName="CarouselContent";let V=r.forwardRef((e,s)=>{let{className:t,...r}=e,{orientation:n}=$();return(0,l.jsx)("div",{ref:s,role:"group","aria-roledescription":"slide",className:(0,Q.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===n?"pl-4":"pt-4",t),...r})});V.displayName="CarouselItem",r.forwardRef((e,s)=>{let{className:t,variant:r="outline",size:n="icon",...a}=e,{orientation:i,scrollPrev:c,canScrollPrev:o}=$();return(0,l.jsxs)(D.$,{ref:s,variant:r,size:n,className:(0,Q.cn)("absolute  h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!o,onClick:c,...a,children:[(0,l.jsx)(Z.A60,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",r.forwardRef((e,s)=>{let{className:t,variant:r="outline",size:n="icon",...a}=e,{orientation:i,scrollNext:c,canScrollNext:o}=$();return(0,l.jsxs)(D.$,{ref:s,variant:r,size:n,className:(0,Q.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!o,onClick:c,...a,children:[(0,l.jsx)(Z.flY,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";let Y=e=>{let{id:s,bandNumber:t,earfcn:r,bandwidth:n,pci:i,rsrp:o,rsrq:d,sinr:m}=e;return(0,l.jsx)(a.Zp,{className:"p-8",children:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-6 justify-between",children:[(0,l.jsxs)("div",{className:"grid gap-2 w-[180px]",children:[(0,l.jsx)("h2",{className:"text-md font-bold",children:"Band"}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t.replace("LTE BAND ","B").replace("NR5G BAND ","N"),t.includes("NR5G")&&(0,l.jsx)(c.E,{className:"text-xs bg-blue-600 hover:bg-blue-800",children:"NR 5G"})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:"E/ARFCN"}),(0,l.jsx)("p",{children:r})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:"Bandwidth"}),(0,l.jsx)("p",{children:n})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:"Physical Cell ID"}),(0,l.jsx)("p",{children:i})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:"RSRP"}),(0,l.jsxs)(c.E,{className:parseInt(o)>=-80?"bg-emerald-500 hover:bg-emerald-800":parseInt(o)>=-100?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[o," dBm"]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:"RSRQ"}),(0,l.jsxs)(c.E,{className:10>=parseInt(d)?"bg-emerald-500 hover:bg-emerald-800":20>=parseInt(d)?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[d," dB"]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("p",{className:"text-sm font-bold",children:t.includes("NR5G")?"NR-SNR":"SINR"}),(0,l.jsxs)(c.E,{className:parseInt(m)>=(t.includes("NR5G")?20:14)?"bg-emerald-500 hover:bg-emerald-800":parseInt(m)>=-2?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[m," dB"]})]})]})})},X=e=>{let{bands:s,isLoading:t}=e;return t?(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"hidden lg:block w-full",children:(0,l.jsxs)(a.Zp,{className:"p-6 grid gap-4",children:[s&&s.map(e=>(0,l.jsx)(Y,{...e},e.id)),(0,l.jsx)(a.wL,{className:"w-full p-6 flex items-center justify-center",children:(0,l.jsx)(a.BT,{className:"text-md",children:"Currently bands connected."})})]})}),(0,l.jsx)(J,{className:"lg:hidden w-full max-w-xs",children:(0,l.jsx)(K,{children:(0,l.jsx)(V,{children:(0,l.jsx)("div",{className:"p-1",children:(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.Wu,{className:"aspect-square p-4 gap-4 flex flex-col items-center justify-center flex-grow",children:[(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"Band"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-16 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"E/ARFCN"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-16 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"Bandwidth"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-16 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"PCI"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-16 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"RSRP"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-32 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"RSRQ"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-32 h-4"})})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"SINR"}),(0,l.jsx)("div",{children:(0,l.jsx)(i.E,{className:"w-32 h-4"})})]})]})})})})})})]}):(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"hidden lg:block w-full",children:(0,l.jsx)(a.Zp,{className:"p-6 grid gap-4",children:s&&s.map(e=>(0,l.jsx)(Y,{...e},e.id))})}),(0,l.jsx)(J,{className:"lg:hidden w-full max-w-xs",children:(0,l.jsx)(K,{children:null==s?void 0:s.map(e=>(0,l.jsx)(V,{className:"md:basis-1/2 lg:basis-1/3",children:(0,l.jsx)("div",{className:"p-1",children:(0,l.jsx)(a.Zp,{children:(0,l.jsxs)(a.Wu,{className:"aspect-square p-4 gap-4 flex flex-col items-center justify-center flex-grow",children:[(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"Band"}),(0,l.jsx)("p",{children:e.bandNumber})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"E/ARFCN"}),(0,l.jsx)("p",{children:e.earfcn})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"Bandwidth"}),(0,l.jsx)("p",{children:e.bandwidth})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"PCI"}),(0,l.jsx)("p",{children:e.pci})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"RSRP"}),(0,l.jsxs)(c.E,{className:parseInt(e.rsrp)>=-80?"bg-emerald-500 hover:bg-emerald-800":parseInt(e.rsrp)>=-100?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[e.rsrp," dBm"]})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"RSRQ"}),(0,l.jsxs)(c.E,{className:10>=parseInt(e.rsrq)?"bg-emerald-500 hover:bg-emerald-800":20>=parseInt(e.rsrq)?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[e.rsrq," dB"]})]}),(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("p",{children:"SINR"}),(0,l.jsxs)(c.E,{className:parseInt(e.sinr)>=20?"bg-emerald-500 hover:bg-emerald-800":parseInt(e.sinr)>=-2?"bg-orange-500 hover:bg-orange-800":"bg-rose-500 hover:bg-rose-800",children:[e.sinr," dB"]})]})]})})})},e.id))})})]})},ee=function(e,s,t,l){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Unknown",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:":",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:",";try{var i,c,o;return(null===(o=e.split("\n")[s])||void 0===o?void 0:null===(c=o.split(n)[t])||void 0===c?void 0:null===(i=c.split(a)[l])||void 0===i?void 0:i.replace(/"/g,"").trim())||r}catch(e){return r}},es=function(e,s){var t,l;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",n=ee((null===(l=e[15])||void 0===l?void 0:null===(t=l.response)||void 0===t?void 0:t.split("\n").find(e=>e.includes('QMAP: "WWAN"')&&e.includes('"'.concat(s,'"'))))||"",0,1,4,r," ",","),a="IPV6"==s?n.replace(/::/g,":"):n;return["0.0.0.0","::","::0","::0:0:0:0:0:0:0:0","0:0:0:0:0:0:0:0"].includes(a)?r:a},et=function(e,s,t,l,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"-";try{var a,i,c;if(!(null===(a=e[t])||void 0===a?void 0:a.response)||!(null===(i=e[r])||void 0===i?void 0:i.response))return n;let o=e[t].response.split("\n").filter(e=>e.includes('+QMAP: "WWAN"')),d=null===(c=o[0])||void 0===c?void 0:c.match(/\+QMAP: "WWAN",\d+,(\d+),/),m=d?d[1]:null;if(!m)return n;let u=e[r].response.split("\n").filter(e=>e.includes("+CGCONTRDP:")).find(e=>{let s=e.match(/\+CGCONTRDP: (\d+),/);return s&&s[1]===m});if(!u)return n;let x=u.split(",");if(x.length<=l[s])return n;return x[l[s]].replace(/"/g,"").trim()||n}catch(e){return console.error("Error parsing DNS address:",e),n}},el=e=>{try{let s=e.match(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/),t=e.split(".").length>4;return s?e:t?eN(e):e.replace(/:{3,}/g,"::")}catch(s){return console.error("Error formatting DNS address:",s),e}},er=e=>ee(e,1,1,3),en=(e,s)=>({1:"Registered",2:"Searching",3:"Denied",4:"Unknown",5:"Roaming"})[Number(ee(e,1,1,1))||Number(ee(s,1,1,1))]||"Not Registered",ea=e=>{let s=e.match(/"LTE BAND \d+"|"NR5G BAND \d+"/g)||[],t=null==s?void 0:s.some(e=>e.includes("LTE")),l=null==s?void 0:s.some(e=>e.includes("NR5G"));return t&&l?"NR5G-NSA":t?"LTE":l?"NR5G-SA":"No Signal"},ei=e=>{let s=["cpuss-0","cpuss-1","cpuss-2","cpuss-3"].map(s=>{var t;let l=e.split("\n").find(e=>e.includes(s));return parseInt(null==l?void 0:null===(t=l.split(":")[1])||void 0===t?void 0:t.split(",")[1].replace(/"/g,"").trim())}),t=s.reduce((e,s)=>e+s,0)/s.length;return"".concat(Math.round(t),"\xb0C")},ec=e=>{let s=[-140,-37625,-32768],t=e=>{var t;return(null==e?void 0:null===(t=e.split(":")[1])||void 0===t?void 0:t.split(",").slice(0,4).map(e=>parseInt(e.trim())).filter(e=>!s.includes(e)))||[]},l=t(e.split("\n").find(e=>e.includes("LTE"))),r=t(e.split("\n").find(e=>e.includes("NR5G"))),n=e=>Math.max(0,Math.min(100,(e.reduce((e,s)=>e+s,0)/e.length+125)/50*100)),a=l.length?n(l):null,i=r.length?n(r):null;return null!==a&&null!==i?"".concat(Math.round((a+i)/2),"%"):null!==a?"".concat(Math.round(a),"%"):null!==i?"".concat(Math.round(i),"%"):"Unknown%"},eo=function(e,s,t,l){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=t[s],a=l[s];return void 0===n||void 0===a||r?void 0!==n&&void 0!==a&&r?ee(e,n,1,a).toUpperCase():"Unknown":parseInt(ee(e,n,1,a),16).toString().toUpperCase()},ed=(e,s,t)=>{let l=t[s];return ee(e,"NR5G-NSA"===s?2:1,1,l)},em=e=>{let s=[-140,-32768,-37625],t=e=>ee(e||"",0,1,1,"Unknown",":"," ").split(",").slice(0,4).map(e=>parseInt(e.trim())).filter(e=>!s.includes(e))||[],l=e=>e.length?Math.max(0,Math.min(100,(e.reduce((e,s)=>e+s,0)/e.length- -10)/40*100)):0,r=e.split("\n"),n=l(t(r.find(e=>e.includes("LTE")))),a=l(t(r.find(e=>e.includes("NR5G"))));return n&&a?"".concat(Math.round((n+a)/2),"%"):n?"".concat(Math.round(n),"%"):a?"".concat(Math.round(a),"%"):"Unknown%"},eu=e=>{let s=e=>e.map(e=>ee(e,0,1,3,"Unknown",":",",")),t=[...s(e.split("+QCAINFO").filter(e=>e.includes("LTE BAND"))),...s(e.split("+QCAINFO").filter(e=>e.includes("NR5G BAND")))];return t.length?t:["Unknown"]},ex=e=>{let s=s=>e.split("+QCAINFO").filter(e=>e.includes(s)).map(e=>{var s,t;return(null===(t=e.split(":")[1])||void 0===t?void 0:null===(s=t.split(",")[1])||void 0===s?void 0:s.trim())||"Unknown"}),t=s("LTE BAND"),l=s("NR5G BAND");return[...t,...l].length?[...t,...l]:["Unknown"]},eh=e=>{let s=(s,t)=>e.split("+QCAINFO").filter(e=>e.includes(s)).map(e=>{var s;return t[null===(s=e.split(":")[1])||void 0===s?void 0:s.split(",")[2]]||"Unknown"}),t=s("LTE BAND",d),l=s("NR5G BAND",m);return[...t,...l].length?[...t,...l]:["Unknown"]},ep=(e,s)=>{let t=e=>{var s;return e&&(null===(s=e[8===e.length?4:5])||void 0===s?void 0:s.trim())||"Unknown"},l=e=>e.map(e=>{var s;return t(null===(s=e.split(":")[1])||void 0===s?void 0:s.split(","))}),r=e.split("+QCAINFO");return[l(r.filter(e=>e.includes("PCC")))[0],...l(r.filter(e=>e.includes("SCC")))].filter(e=>"Unknown"!==e)},eg=e=>{let s=e=>{var s;return e&&(null===(s=e[(()=>{switch(e.length){case 8:return 5;case 12:return 9;default:return 6}})()])||void 0===s?void 0:s.trim())||"Unknown"},t=e=>e.map(e=>{var t;return s(null===(t=e.split(":")[1])||void 0===t?void 0:t.split(","))}),l=e.split("+QCAINFO");return[t(l.filter(e=>e.includes("PCC")))[0],...t(l.filter(e=>e.includes("SCC")))].filter(e=>"Unknown"!==e)},ev=e=>{let s=e=>{var s;return e&&(null===(s=e[(()=>{switch(e.length){case 8:return 6;case 12:return 10;default:return 7}})()])||void 0===s?void 0:s.trim())||"Unknown"},t=e=>e.map(e=>{var t;return s(null===(t=e.split(":")[1])||void 0===t?void 0:t.split(","))}),l=e.split("+QCAINFO");return[t(l.filter(e=>e.includes("PCC")))[0],...t(l.filter(e=>e.includes("SCC")))].filter(e=>"Unknown"!==e)},ef=(e,s)=>{let t=e=>{var s;return e&&(null===(s=e[(()=>{switch(e.length){case 9:return 8;case 8:return 7;case 12:return 11;default:return 9}})()])||void 0===s?void 0:s.trim())||"Unknown"},l=e=>e.map(e=>{var s;let l=t(null===(s=e.split(":")[1])||void 0===s?void 0:s.split(","));if("-32768"===l)return"-";let r=parseInt(l)>=4e3?"4000":-3e3>parseInt(l)?"-":l;return isNaN(parseInt(r))||e.includes("LTE")?r||"Unknown":Math.round(parseInt(r)/100).toString()}),r=e.split("+QCAINFO");return[l(r.filter(e=>e.includes("PCC")))[0],...l(r.filter(e=>e.includes("SCC")))].filter(e=>"Unknown"!==e)},ej=e=>{let s=[-32768,-140],t=e=>ee(e||"",0,1,1,"-32768",":"," ").split(",").slice(0,4).map(e=>parseInt(e.trim())).filter(e=>!s.includes(e))||[],l=t(e.split("\n").find(e=>e.includes("LTE"))).length,r=t(e.split("\n").find(e=>e.includes("NR5G"))).length;return l&&r?"LTE ".concat(l," /  NR ").concat(r):l?" LTE ".concat(l):r?"NR ".concat(r):"Unknown"},eN=e=>{try{let s=e.split(".");if(s.length<8)return e;let t=s.map(e=>{let s=parseInt(e,10);return isNaN(s)?"00":s.toString(16).padStart(2,"0")}),l=[];for(let e=0;e<t.length;e+=2)e+1<t.length?l.push(t[e]+t[e+1]):l.push(t[e]+"00");let r=l.map(e=>e.replace(/^0+/,"")||"0"),n=[],a=[];for(let e=0;e<r.length;e++)"0"===r[e]?a.push(e):a.length>0&&(a.length>n.length&&(n=[...a]),a=[]);if(a.length>n.length&&(n=[...a]),n.length>=2){let e=[];for(let s=0;s<r.length;s++)s===n[0]?(e.push(""),s=n[n.length-1]):e.push(r[s]);return e.join(":").replace(/::+/g,"::")}return r.join(":")}catch(s){return console.error("Error formatting IPv6:",s),e}},ew=()=>{let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[n,a]=(0,r.useState)(null),[i,c]=(0,r.useState)(0),[o,d]=(0,r.useState)(!0),m=(0,r.useCallback)(async()=>{try{d(!0);let e=await fetch("/cgi-bin/quecmanager/home/fetch_public_ip.sh"),t="Can't fetch public IP";if(e.ok){let s=await e.json();t=s.error?"No Internet":s.public_ip||"-"}s(e=>e?{...e,networkAddressing:{...e.networkAddressing,publicIPv4:t}}:null)}catch(e){console.error("Error fetching public IP:",e),s(e=>e?{...e,networkAddressing:{...e.networkAddressing,publicIPv4:"Can't fetch public IP"}}:null)}finally{d(!1)}},[]),u=(0,r.useCallback)(async e=>{console.error("Error fetching home data:",e),i<2?(console.log("Attempting automatic recovery (attempt ".concat(i+1,"/2)...")),c(e=>e+1),await new Promise(e=>setTimeout(e,2e3)),x()):(console.error("Max retry attempts reached. Please refresh manually."),a(e),s({simCard:{slot:"Unknown",state:"Unknown",provider:"Unknown",phoneNumber:"Unknown",imsi:"-",iccid:"-",imei:"-"},connection:{apn:"No APN",operatorState:"Unknown",functionalityState:"Disabled",networkType:"No Signal",modemTemperature:"Unknown",accessTechnology:"-"},dataTransmission:{carrierAggregation:"Inactive",connectedBands:"-",signalStrength:"-%",mimoLayers:"-",bandwidth:"Unknown"},cellularInfo:{cellId:"-",trackingAreaCode:"-",cellIdRaw:"-",trackingAreaCodeRaw:"-",physicalCellId:"-",earfcn:"-",mcc:"-",mnc:"-",signalQuality:"-%"},currentBands:{id:[1],bandNumber:["-"],earfcn:["-"],bandwidth:["-"],pci:["-"],rsrp:["-"],rsrq:["-"],sinr:["-"]},networkAddressing:{publicIPv4:"Not available",cellularIPv4:"Not available",cellularIPv6:"Not available",carrierPrimaryDNS:"Not available",carrierSecondaryDNS:"Not available",rawCarrierPrimaryDNS:"Not available",rawCarrierSecondaryDNS:"Not available"},timeAdvance:{lteTimeAdvance:"-",nrTimeAdvance:"-"}}))},[i]),x=(0,r.useCallback)(async()=>{try{var e,t,r,n,i,o,d,x,h,p,g,v,f,j,N,w,b,y,S,A,C,I,k,E,T,R;let l=await fetch("/cgi-bin/quecmanager/at_cmd/fetch_data.sh?set=1");if(!l.ok)throw Error("API returned status ".concat(l.status));let u=await l.json();u.some(e=>e.response.toLowerCase().includes("failed"))&&(console.error("SMS tool failure detected in modem response. Attempting service restart via reset-at-bridge.sh."),await fetch("/cgi-bin/quecmanager/reset-at-bridge.sh"));let P={simCard:{slot:ee(u[0].response,1,1,0),state:u[6].response.includes("READY")?"Inserted":u[6].response.includes("PIN")?"Waiting for PIN":u[6].response.includes("PUK")?"Waiting for Password":u[6].response.toLowerCase().includes("failed")?"SMS-Tool Failed Token":"Unknown",provider:ee(u[2].response,1,1,2),phoneNumber:ee(u[1].response,1,1,1),imsi:ee(u[3].response,1,0,0),iccid:ee(u[4].response,1,1,1,"Unknown",":"," "),imei:ee(u[5].response,1,0,0)},connection:{apn:ee(null===(e=u[7])||void 0===e?void 0:e.response,1,1,2,ee(null===(t=u[12])||void 0===t?void 0:t.response,1,1,2)),operatorState:en(null===(r=u[8])||void 0===r?void 0:r.response,null===(n=u[16])||void 0===n?void 0:n.response)||"Unknown",functionalityState:"1"===ee(null===(i=u[9])||void 0===i?void 0:i.response,1,1,0)?"Enabled":"Disabled",networkType:ea(u[13].response)||"No Signal",modemTemperature:ei(u[11].response)||"Unknown",accessTechnology:er(u[2].response)||"Unknown"},dataTransmission:{carrierAggregation:(null===(o=u[13].response.match(/"LTE BAND \d+"|"NR5G BAND \d+"/g))||void 0===o?void 0:o.length)>1?"Multi":"Inactive",bandwidth:eh(u[13].response).join(", ")||"Unknown",connectedBands:eu(u[13].response).join(", ").replaceAll("LTE BAND ","B").replaceAll("NR5G BAND ","N")||"Unknown",signalStrength:ec(u[14].response)||"Unknown",mimoLayers:ej(u[14].response)||"Unknown"},cellularInfo:{cellId:eo(null===(d=u[10])||void 0===d?void 0:d.response,ea(null===(x=u[13])||void 0===x?void 0:x.response),{"NR5G-SA":1,"NR5G-NSA":2,LTE:1},{"NR5G-SA":6,"NR5G-NSA":4,LTE:6},!1),trackingAreaCode:eo(null===(h=u[10])||void 0===h?void 0:h.response,ea(null===(p=u[13])||void 0===p?void 0:p.response),{"NR5G-SA":1,"NR5G-NSA":2,LTE:1},{"NR5G-SA":8,"NR5G-NSA":10,LTE:12},!1),cellIdRaw:eo(null===(g=u[10])||void 0===g?void 0:g.response,ea(null===(v=u[13])||void 0===v?void 0:v.response),{"NR5G-SA":1,"NR5G-NSA":2,LTE:1},{"NR5G-SA":6,"NR5G-NSA":4,LTE:6},!0),trackingAreaCodeRaw:eo(null===(f=u[10])||void 0===f?void 0:f.response,ea(null===(j=u[13])||void 0===j?void 0:j.response),{"NR5G-SA":1,"NR5G-NSA":2,LTE:1},{"NR5G-SA":8,"NR5G-NSA":10,LTE:12},!0),physicalCellId:ep(u[13].response,ea(u[13].response)).join(", ")||"Unknown",earfcn:ex(u[13].response).join(", "),mcc:ed(null===(N=u[10])||void 0===N?void 0:N.response,ea(null===(w=u[13])||void 0===w?void 0:w.response),{"NR5G-NSA":2,LTE:4,"NR5G-SA":4}),mnc:ed(null===(b=u[10])||void 0===b?void 0:b.response,ea(null===(y=u[13])||void 0===y?void 0:y.response),{"NR5G-NSA":3,LTE:5,"NR5G-SA":5}),signalQuality:em(u[19].response)||"Unknown"},currentBands:{id:Array.from({length:null!==(R=null===(S=eu(u[13].response))||void 0===S?void 0:S.length)&&void 0!==R?R:0},(e,s)=>s+1)||[1],bandNumber:eu(u[13].response)||["Unknown"],earfcn:ex(u[13].response),bandwidth:eh(u[13].response)||["Unknown"],pci:ep(u[13].response,ea(u[13].response))||["Unknown"],rsrp:eg(u[13].response),rsrq:ev(u[13].response)||["Unknown"],sinr:ef(u[13].response,ea(u[13].response))||["Unknown"]},networkAddressing:{publicIPv4:"Loading...",cellularIPv4:es(u,"IPV4"),cellularIPv6:es(u,"IPV6"),carrierPrimaryDNS:el(et(u,ea(null===(A=u[13])||void 0===A?void 0:A.response),15,{"NR5G-SA":5,"NR5G-NSA":6,LTE:6},20)),carrierSecondaryDNS:el(et(u,ea(null===(C=u[13])||void 0===C?void 0:C.response),15,{"NR5G-SA":6,"NR5G-NSA":7,LTE:7},20)),rawCarrierPrimaryDNS:et(u,ea(null===(I=u[13])||void 0===I?void 0:I.response),15,{"NR5G-SA":5,"NR5G-NSA":6,LTE:6},20),rawCarrierSecondaryDNS:et(u,ea(null===(k=u[13])||void 0===k?void 0:k.response),15,{"NR5G-SA":6,"NR5G-NSA":7,LTE:7},20)},timeAdvance:{lteTimeAdvance:ee(null===(E=u[21])||void 0===E?void 0:E.response,1,1,2),nrTimeAdvance:ee(null===(T=u[22])||void 0===T?void 0:T.response,1,1,2)}};s(P),c(0),a(null),m()}catch(e){console.error("Error fetching home data:",e),u(e instanceof Error?e:Error(String(e)))}finally{l(!1)}},[u,m]);return(0,r.useEffect)(()=>{let e,s,t=!0;return(async()=>{if(t)try{await x()}finally{t&&l(!1)}})(),e=setInterval(()=>{x()},15e3),s=setInterval(()=>{m()},3e4),()=>{t=!1,clearInterval(e),clearInterval(s)}},[x,m]),{data:e,isLoading:t,error:n,refresh:(0,r.useCallback)(async()=>{l(!0),await x(),l(!1)},[x]),isPublicIPLoading:o}},eb=()=>{let[e,s]=(0,r.useState)("Unknown"),[t,l]=(0,r.useState)(!0),[n,a]=(0,r.useState)(!1),i=(0,r.useRef)(null),c=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/ping/ping_service.sh");if(!e.ok)return!1;let s=await e.json();if("success"===s.status&&s.data)return!0===s.data.enabled;return!1}catch(e){return console.error("Error checking ping monitoring state:",e),!1}},[]),o=(0,r.useCallback)(()=>{i.current&&(clearInterval(i.current),i.current=null)},[]),d=(0,r.useCallback)(async()=>{try{l(!0);let e=await c();if(a(e),e){s("Ping Active"),l(!1),o();return}let t=await fetch("/cgi-bin/quecmanager/home/check_net.sh"),r=await t.json();s("ACTIVE"===r.connection?"Connected":"Disconnected"),l(!1)}catch(e){console.error("Error fetching data connection state:",e),s("Unknown"),l(!1)}},[c,o]),m=(0,r.useCallback)(()=>{o(),i.current=setInterval(d,3e4)},[d,o]);return(0,r.useEffect)(()=>(d(),m(),()=>o()),[d,m,o]),{dataConnectionState:e,refresh:(0,r.useCallback)(()=>{d(),m()},[d,m]),isStateLoading:t,isPingMonitoringActive:n}},ey=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][s]},eS=()=>{let[e,s]=(0,r.useState)("0 Bytes"),[t,l]=(0,r.useState)("0 Bytes"),[n,a]=(0,r.useState)(""),i=e=>{var t,r;let n=Array.isArray(e)?e[e.length-1]:e;if(!n)return;a(n.datetime);let i=n.output.replace(/\r\\n/g,"\n").trim().split("\n").filter(e=>e.trim()),c=null===(t=i.find(e=>e.includes("+QGDCNT:")))||void 0===t?void 0:t.trim(),o=null===(r=i.find(e=>e.includes("+QGDNRCNT:")))||void 0===r?void 0:r.trim();if(!c||!o){console.error("Missing required data in response");return}let[d,m]=c.replace("+QGDCNT:","").split(",").map(e=>parseInt(e.trim())),[u,x]=o.replace("+QGDNRCNT:","").split(",").map(e=>parseInt(e.trim()));s(ey((m||0)+(u||0))),l(ey((d||0)+(x||0)))},c=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/fetch_data_usage.sh"),s=await e.json();i(s)}catch(e){console.error("Error fetching traffic stats:",e)}},[]);return(0,r.useEffect)(()=>{c();let e=setInterval(c,12e3);return()=>clearInterval(e)},[c]),{bytesSent:e,bytesReceived:t,lastUpdateTime:n,refresh:(0,r.useCallback)(()=>{c()},[c])}};var eA=t(23484);let eC=()=>{let[e,s]=(0,r.useState)(!1),[t,l]=(0,r.useState)(null),n=(e,s)=>{var t,l,r,n;let a=null===(l=e.split("\n")[1])||void 0===l?void 0:null===(t=l.split(":")[1])||void 0===t?void 0:t.split(",")[1].trim(),i=null===(n=s.split("\n")[1])||void 0===n?void 0:null===(r=n.split(":")[1])||void 0===r?void 0:r.split(",")[1].trim();return"1"===a||"1"===i?"Registered":"Not Registered"},a=(e,s)=>{var t,l,r,n;return(null===(l=e.split("\n")[1])||void 0===l?void 0:null===(t=l.split(":")[1])||void 0===t?void 0:t.split(",")[2].replace(/"/g,"").trim())===(null===(n=s.split("\n")[1])||void 0===n?void 0:null===(r=n.split(":")[1])||void 0===r?void 0:r.split(",")[2].replace(/"/g,"").trim())?"Enabled":"Disabled"},i=e=>{var s,t,l,r;let n=null===(t=e.split("\n")[1])||void 0===t?void 0:null===(s=t.split(":")[1])||void 0===s?void 0:s.split(",")[1].trim(),a=null===(r=e.split("\n")[2])||void 0===r?void 0:null===(l=r.split(":")[1])||void 0===l?void 0:l.split(",")[1].trim();return n&&"1"===n||a&&"1"===a?"Connected":"Disconnected"},c=e=>{try{var s,t,l,r;let n=e.trim().split("\n").map(e=>e.trim()),a=n.find(e=>e.includes("+QRSRP:")&&e.includes("LTE")),i=n.find(e=>e.includes("+QRSRP:")&&e.includes("NR5G")),c=[];a&&(c=null==a?void 0:null===(t=a.split(":")[1])||void 0===t?void 0:null===(s=t.split(","))||void 0===s?void 0:s.slice(0,4).map(e=>e.trim()).filter(e=>!isNaN(parseInt(e))).map(e=>parseInt(e)));let o=[];if(i&&(o=null==i?void 0:null===(r=i.split(":")[1])||void 0===r?void 0:null===(l=r.split(","))||void 0===l?void 0:l.slice(0,4).map(e=>e.trim()).filter(e=>!isNaN(parseInt(e))).map(e=>parseInt(e))),c=c.filter(e=>-32768!==e),o=o.filter(e=>-32768!==e),c=c.filter(e=>-140!==e),o=o.filter(e=>-140!==e),c.length>0){let e=c.reduce((e,s)=>e+s,0)/c.length;if(o.length>0){let s=o.reduce((e,s)=>e+s,0)/o.length;return(e+s)/2<-100?"Poor":"Good"}return e<-100?"Poor":"Good"}if(o.length>0)return o.reduce((e,s)=>e+s,0)/o.length<-100?"Poor":"Good";return"N/A"}catch(e){return console.error("Error processing cell signal:",e),"N/A"}},o=e=>{let s=e.split("\n").filter(e=>e.startsWith("+QTEMP:")).map(e=>parseInt(e.split(":")[1].split(",")[1].replace(/"/g,"").trim())).filter(e=>e>=0&&e<99);return s.reduce((e,s)=>e+s,0)/s.length<50?"Normal":"High"},d=e=>{var s,t,l,r,n,a;let i=null===(t=e.split("\n")[1])||void 0===t?void 0:null===(s=t.split(":")[1])||void 0===s?void 0:s.split(",")[1].trim(),c=null===(r=e.split("\n")[2])||void 0===r?void 0:null===(l=r.split(":")[1])||void 0===l?void 0:l.split(",")[1].trim(),o=null===(a=e.split("\n")[3])||void 0===a?void 0:null===(n=a.split(":")[1])||void 0===n?void 0:n.split(",")[1].trim(),d=["0"!==i?"EMM: ".concat(i):null,"0"!==c?"ESM: ".concat(c):null,"0"!==o?"NRMM: ".concat(o):null].filter(Boolean);return d.length>0?d.join(", "):"None"},m=e=>{var s,t,l,r,n,a;let i=null===(t=e.split("\n")[1])||void 0===t?void 0:null===(s=t.split(":")[1])||void 0===s?void 0:s.split(",")[1].trim(),c=null===(r=e.split("\n")[2])||void 0===r?void 0:null===(l=r.split(":")[1])||void 0===l?void 0:l.split(",")[1].trim(),o=null===(a=e.split("\n")[3])||void 0===a?void 0:null===(n=a.split(":")[1])||void 0===n?void 0:n.split(",")[1].trim(),d={};return i&&"0"!==i&&(d.emm={code:i,description:eA.ZK[i]||"Unknown EMM cause"}),c&&"0"!==c&&(d.esm={code:c,description:eA.jq[c]||"Unknown ESM cause"}),o&&"0"!==o&&(d.nrmm={code:o,description:eA.QI[o]||"Unknown NRMM cause"}),Object.keys(d).length>0?d:null};return{isRunningDiagnostics:e,runDiagnosticsData:t,startDiagnostics:async()=>{s(!0),new Date().toISOString();try{let e=await fetch("/cgi-bin/quecmanager/at_cmd/fetch_data.sh?set=6"),s=await e.json(),t={netRegistration:n(s[0].response,s[1].response),simState:s[2].response.split("\n")[1].split(":")[1].trim(),manualAPN:a(s[3].response,s[4].response),wanIP:i(s[5].response),cellSignal:c(s[6].response),modemTemp:o(s[7].response),netReject:d(s[8].response),rejectCauses:m(s[8].response)};return l(t),t}catch(e){throw console.error("Error running diagnostics:",e),e}finally{s(!1)}}}};var eI=t(16028),ek=t(80159),eE=t(12607),eT=t(10964),eR=t(89463),eP=t(90304),eM=t(622),eD=t(8782),ez=t(20633),eU=t(99312),eL=t(7778),eG=t(25262),eB=t(91994),eF=t(71834);let e_=e=>{if(null==e)return"N/A";let s=["B","KB","MB","GB"],t=e,l=0;for(;t>=1024&&l<s.length-1;)t/=1024,l++;return"".concat(t.toFixed(2)," ").concat(s[l])},eq=e=>{if(null==e)return"N/A";let s=["bps","Kbps","Mbps","Gbps"],t=8*e,l=0;for(;t>=1e3&&l<s.length-1;)t/=1e3,l++;return"Gbps"===s[l]?"".concat(t.toFixed(2)," ").concat(s[l]):"".concat(Math.round(t)," ").concat(s[l])},eO=()=>{var e,s,t,i;let{toast:o}=(0,n.dj)(),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[b,y]=(0,r.useState)(0),[S,A]=(0,r.useState)(!1),[C,I]=(0,r.useState)(!1),k=(0,r.useRef)(null),E=(0,r.useRef)(null),T=(0,r.useRef)(!1),R=(0,r.useCallback)(()=>{m(null),x(null),p(null),v(!1),j(!1),w(!1),y(0),E.current=null,T.current=!1,k.current&&(clearInterval(k.current),k.current=null)},[]);(0,r.useEffect)(()=>{let e=sessionStorage.getItem("speedtestData");if(e&&m(JSON.parse(e)),g&&!f){A(!0);let e=setTimeout(()=>{A(!1)},1e4);return()=>clearTimeout(e)}},[g,f]),(0,r.useEffect)(()=>()=>{k.current&&clearInterval(k.current)},[]);let P=(0,r.useCallback)(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/home/speedtest/speedtest_status.sh");if(!e.ok)throw Error("Failed to fetch status: ".concat(e.status));let s=await e.json();if("not_running"===s.status){f&&(p("Test ended unexpectedly"),j(!1)),k.current&&(clearInterval(k.current),k.current=null);return}if(s.type)try{switch(s.type){case"ping":x("ping"),s.ping&&"number"==typeof s.ping.progress&&y(s.ping.progress);break;case"download":case"upload":"ping"!==u&&x(s.type);break;case"result":if(s.download&&s.upload&&s.ping){E.current=s,m(s),T.current=!0,v(!0),j(!1),sessionStorage.setItem("speedtestData",JSON.stringify(s)),k.current&&(clearInterval(k.current),k.current=null);return}console.warn("Incomplete result data received:",s)}}catch(e){console.error("Error processing speedtest data:",e)}if(T.current){k.current&&(clearInterval(k.current),k.current=null);return}(s.type&&(s.download||s.upload||s.ping)||s.isp)&&(E.current=s,m(s))}catch(e){console.error("Error polling speedtest status:",e),f&&(p("Failed to get speedtest status"),j(!1),k.current&&(clearInterval(k.current),k.current=null))}},[u,f]),M=(0,r.useCallback)(async()=>{if(!S)try{if(R(),w(!0),j(!0),I(!0),!(await fetch("/cgi-bin/quecmanager/home/speedtest/start_speedtest.sh",{method:"GET"})).ok)throw Error("Failed to start speedtest");k.current=setInterval(P,300),w(!1)}catch(e){console.error("Speedtest start error:",e),p(e instanceof Error?"Failed to start speedtest: ".concat(e.message):"Failed to start speedtest"),w(!1),j(!1)}},[S,R,P]);return(0,l.jsxs)(a.Zp,{children:[(0,l.jsx)(a.aR,{children:(0,l.jsx)(a.ZB,{children:"Network Speedtest"})}),(0,l.jsxs)(a.Wu,{className:"flex flex-col gap-6 p-4 items-center justify-center",children:[(0,l.jsxs)(z.lG,{open:C,onOpenChange:I,children:[(0,l.jsx)(z.zM,{asChild:!0,children:(0,l.jsxs)("div",{className:"relative flex flex-col items-center justify-center",children:[(0,l.jsx)(eF.A,{color:"#5420ab",size:192,className:"-top-8 -left-8 absolute",style:{zIndex:1}}),(0,l.jsx)(B.A,{className:"size-32 z-10 text-primary cursor-pointer hover:text-primary/80 transition-colors duration-300",onClick:e=>{S||(e.preventDefault(),M())}})]})}),(0,l.jsxs)(z.Cf,{className:"sm:max-w-[800px] max-w-sm mx-auto",children:[(0,l.jsx)(z.c7,{children:(0,l.jsxs)(z.L3,{className:"flex items-center",children:[(0,l.jsx)(eT.A,{className:"mr-2"})," Network Speedtest",g&&!f&&(0,l.jsx)(c.E,{variant:"outline",className:"ml-2 hidden md:block",children:"Complete"}),f&&(0,l.jsx)(c.E,{variant:"outline",className:"ml-2 bg-primary/10",children:"Running..."})]})}),(0,l.jsx)("div",{className:"lg:max-w-full mx-auto min-w-sm py-6",children:(()=>{var e,s,t,r,n,i,c,o,m,x,p,v,j,w,y,S,A,C,I,k,E,T,P,D,z,U,L,G,B,F,_,q,O,Z,H,Q,W,$,J,K,V,Y,X,ee,es,et,el,er,en;let ea=g||d&&d.download&&d.upload&&d.ping&&!f;return ea?d&&d.download&&d.upload&&d.ping?(0,l.jsxs)("div",{className:"grid gap-4 w-full min-w-sm",children:[(0,l.jsxs)(a.Zp,{children:[(0,l.jsx)(a.aR,{children:(0,l.jsxs)(a.ZB,{className:"flex items-center",children:[(0,l.jsx)(eT.A,{className:"mr-4 text-violet-600"})," Speedtest Result"]})}),(0,l.jsx)(a.Wu,{className:"lg:py-12 py-6 min-w-sm w-full",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-2 grid-cols-1 grid-flow-row gap-4 lg:gap-y-0 gap-y-8 gap-x-8",children:[(0,l.jsxs)("div",{className:"grid gap-1 place-items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eR.A,{className:"text-green-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"font-semibold",children:"Download"})]}),(0,l.jsx)("h1",{className:"text-[3rem] font-semibold text-center antialiased leading-tight",children:eq(null===(e=d.download)||void 0===e?void 0:e.bandwidth)}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eP.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Latency"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(E=null===(r=d.download)||void 0===r?void 0:null===(t=r.latency)||void 0===t?void 0:null===(s=t.iqm)||void 0===s?void 0:s.toFixed(2))&&void 0!==E?E:"N/A"," ","ms"]})]})]}),(0,l.jsxs)("div",{className:"grid gap-1.5 place-items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eM.A,{className:"text-violet-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"font-semibold",children:"Upload"})]}),(0,l.jsx)("h1",{className:"text-[3rem] font-semibold text-center antialiased leading-tight",children:eq(null===(n=d.upload)||void 0===n?void 0:n.bandwidth)}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eP.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Latency"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(T=null===(o=d.upload)||void 0===o?void 0:null===(c=o.latency)||void 0===c?void 0:null===(i=c.iqm)||void 0===i?void 0:i.toFixed(2))&&void 0!==T?T:"N/A"," ","ms"]})]})]})]})}),(0,l.jsxs)(a.wL,{className:"flex items-center justify-between mx-auto",children:[(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eD.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Ping"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(P=null===(x=d.ping)||void 0===x?void 0:null===(m=x.latency)||void 0===m?void 0:m.toFixed(2))&&void 0!==P?P:"N/A"," ms"]})]}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(ez.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Jitter"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(D=null===(v=d.ping)||void 0===v?void 0:null===(p=v.jitter)||void 0===p?void 0:p.toFixed(2))&&void 0!==D?D:"N/A"," ms"]})]})]})]}),(null===(j=d.result)||void 0===j?void 0:j.url)&&(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2 mt-4 md:hidden",children:[(0,l.jsx)(eU.A,{className:"text-blue-600 size-4"}),(0,l.jsx)("a",{href:d.result.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline",children:"View Full Result Online"})]}),(0,l.jsxs)(a.Zp,{className:"hidden md:block",children:[(0,l.jsx)(a.aR,{children:(0,l.jsxs)(a.ZB,{className:"flex items-center",children:[(0,l.jsx)(eL.A,{className:"mr-4 text-blue-600"})," Connection & Server Details"]})}),(0,l.jsx)(a.Wu,{children:(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"ISP:"}),(0,l.jsx)("p",{children:d.isp||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Internal IP:"}),(0,l.jsx)("p",{children:(null===(w=d.interface)||void 0===w?void 0:w.internalIp)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"External IP:"}),(0,l.jsx)("p",{children:(null===(y=d.interface)||void 0===y?void 0:y.externalIp)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Server Name:"}),(0,l.jsx)("p",{children:(null===(S=d.server)||void 0===S?void 0:S.name)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Location:"}),(0,l.jsx)("p",{children:(null===(A=d.server)||void 0===A?void 0:A.location)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Country:"}),(0,l.jsx)("p",{children:(null===(C=d.server)||void 0===C?void 0:C.country)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Server IP:"}),(0,l.jsx)("p",{children:(null===(I=d.server)||void 0===I?void 0:I.host)||"N/A"})]}),(null===(k=d.result)||void 0===k?void 0:k.url)&&(0,l.jsxs)("div",{className:"flex items-center gap-x-2 mt-4",children:[(0,l.jsx)(eU.A,{className:"text-blue-600 size-4"}),(0,l.jsx)("a",{href:d.result.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline",children:"View Full Result Online"})]})]})})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)(eE.A,{className:"text-amber-500 lg:size-16 size-8"}),(0,l.jsx)("h3",{className:"text-xl font-semibold",children:"Incomplete Test Results"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:["The test didn't complete properly. Some data may be missing.",(0,l.jsx)("span",{className:"underline cursor-pointer ml-2 block",onClick:()=>{R(),M()},children:"Run the test again"})]})]}):h?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)(eE.A,{className:"text-rose-600 lg:size-48 size-16 animate-pulse"}),(0,l.jsx)("h3",{className:"text-xl font-semibold",children:"Network Speedtest Failed"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Something went wrong while running the speedtest.",(0,l.jsx)("span",{className:"underline cursor-pointer ml-2",onClick:()=>{R(),M()},children:"Please try again."})]})]}):N||f&&!d?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)(eG.A,{className:"text-primary lg:size-48 size-16 animate-pulse"}),(0,l.jsx)("h3",{className:"md:text-xl text-lg font-semibold",children:"Initiating Network Speedtest"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Locating and establishing a connection to a server. Please wait..."})]}):"ping"===u?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6 transition-all duration-500 ease-in-out",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(eD.A,{className:"text-blue-500 size-16 animate-pulse drop-shadow-sm"}),(0,l.jsx)("div",{className:"absolute -inset-2 bg-blue-500/10 rounded-full animate-ping"})]}),(0,l.jsxs)("div",{className:"text-center space-y-2",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-blue-600 transition-colors duration-300",children:"Testing Ping Latency"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Measuring network responsiveness..."})]}),(0,l.jsxs)("div",{className:"w-full max-w-md space-y-2",children:[(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(100*(b||0),"%")}})}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(100*(b||0)),"% complete"]})})]}),(null==d?void 0:d.ping)&&(0,l.jsxs)("div",{className:"text-center space-y-2 animate-in fade-in duration-500",children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-blue-600 tabular-nums transition-all duration-200",children:[d.ping.latency.toFixed(1)," ms"]}),d.ping.jitter&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["Jitter: ",d.ping.jitter.toFixed(1)," ms"]})]}),(0,l.jsx)("div",{className:"text-center opacity-60 transition-opacity duration-500",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-400",children:[(0,l.jsx)(eR.A,{className:"size-4"}),(0,l.jsx)("span",{className:"text-xs",children:"Download test coming next..."})]})})]}):"download"===u?(0,l.jsxs)("div",{className:"space-y-6 transition-all duration-500 ease-in-out",children:[(null==d?void 0:d.ping)&&(0,l.jsx)("div",{className:"bg-blue-50 rounded-lg p-3 transition-all duration-500",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eD.A,{className:"text-blue-500 size-4"}),(0,l.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Ping Complete"})]}),(0,l.jsxs)("div",{className:"text-sm font-bold text-blue-600 tabular-nums",children:[d.ping.latency.toFixed(1)," ms"]})]})}),(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,l.jsx)(eR.A,{className:"text-green-500 size-16 animate-pulse drop-shadow-sm"}),(0,l.jsx)("div",{className:"absolute size-24 bg-green-500/10 rounded-full animate-ping -top-4 "})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)("h3",{className:"text-xl font-semibold text-green-600 transition-colors duration-300",children:"Testing Download Speed"})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-4xl lg:text-5xl font-bold text-green-600 tabular-nums transition-all duration-200 tracking-tight",children:(null==d?void 0:null===(z=d.download)||void 0===z?void 0:z.bandwidth)?eq(d.download.bandwidth):"0 Mbps"}),(null==d?void 0:d.download)&&(0,l.jsxs)("div",{className:"space-y-1 text-sm text-gray-500",children:[(0,l.jsxs)("div",{className:"tabular-nums",children:[e_(d.download.bytes)," transferred"]}),d.download.elapsed&&(0,l.jsxs)("div",{className:"tabular-nums",children:[(d.download.elapsed/1e3).toFixed(1),"s elapsed"]})]})]}),(0,l.jsx)("div",{className:"text-center opacity-60 transition-opacity duration-500",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-400",children:[(0,l.jsx)(eM.A,{className:"size-4"}),(0,l.jsx)("span",{className:"text-xs",children:"Upload test coming next..."})]})})]})]}):"upload"===u?(0,l.jsx)("div",{className:"space-y-6 transition-all duration-500 ease-in-out",children:(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,l.jsx)(eM.A,{className:"text-violet-500 size-16 animate-pulse drop-shadow-sm"}),(0,l.jsx)("div",{className:"absolute size-24 bg-violet-500/10 rounded-full animate-ping -top-4 "})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-violet-600 transition-colors duration-300",children:"Testing Upload Speed"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Uploading test data..."})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-4xl lg:text-5xl font-bold text-violet-600 tabular-nums transition-all duration-200 tracking-tight",children:(null==d?void 0:null===(U=d.upload)||void 0===U?void 0:U.bandwidth)?eq(d.upload.bandwidth):"0 Mbps"}),(null==d?void 0:d.upload)&&(0,l.jsxs)("div",{className:"space-y-1 text-sm text-gray-500",children:[(0,l.jsxs)("div",{className:"tabular-nums",children:[e_(d.upload.bytes)," transferred"]}),d.upload.elapsed&&(0,l.jsxs)("div",{className:"tabular-nums",children:[(d.upload.elapsed/1e3).toFixed(1),"s elapsed"]})]})]})]})}):ea?d&&d.download&&d.upload&&d.ping?(0,l.jsxs)("div",{className:"grid gap-4 w-full min-w-sm",children:[(0,l.jsxs)(a.Zp,{children:[(0,l.jsx)(a.aR,{children:(0,l.jsxs)(a.ZB,{className:"flex items-center",children:[(0,l.jsx)(eT.A,{className:"mr-4 text-violet-600"})," Speedtest Result"]})}),(0,l.jsx)(a.Wu,{className:"lg:py-12 py-6 min-w-sm w-full",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-2 grid-cols-1 grid-flow-row gap-4 lg:gap-y-0 gap-y-8 gap-x-8",children:[(0,l.jsxs)("div",{className:"grid gap-1 place-items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eR.A,{className:"text-green-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"font-semibold",children:"Download"})]}),(0,l.jsx)("h1",{className:"text-[3rem] font-semibold text-center antialiased leading-tight",children:eq(null===(L=d.download)||void 0===L?void 0:L.bandwidth)}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eP.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Latency"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(et=null===(F=d.download)||void 0===F?void 0:null===(B=F.latency)||void 0===B?void 0:null===(G=B.iqm)||void 0===G?void 0:G.toFixed(2))&&void 0!==et?et:"N/A"," ","ms"]})]})]}),(0,l.jsxs)("div",{className:"grid gap-1.5 place-items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eM.A,{className:"text-violet-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"font-semibold",children:"Upload"})]}),(0,l.jsx)("h1",{className:"text-[3rem] font-semibold text-center antialiased leading-tight",children:eq(null===(_=d.upload)||void 0===_?void 0:_.bandwidth)}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eP.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Latency"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(el=null===(Z=d.upload)||void 0===Z?void 0:null===(O=Z.latency)||void 0===O?void 0:null===(q=O.iqm)||void 0===q?void 0:q.toFixed(2))&&void 0!==el?el:"N/A"," ","ms"]})]})]})]})}),(0,l.jsxs)(a.wL,{className:"flex items-center justify-between mx-auto",children:[(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(eD.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Ping"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(er=null===(Q=d.ping)||void 0===Q?void 0:null===(H=Q.latency)||void 0===H?void 0:H.toFixed(2))&&void 0!==er?er:"N/A"," ms"]})]}),(0,l.jsxs)("div",{className:"grid gap-0.5 lg:flex lg:items-center lg:space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,l.jsx)(ez.A,{className:"text-gray-600 lg:size-6 size-4"}),(0,l.jsx)("p",{className:"text-foreground-muted text-sm text-center",children:"Jitter"})]}),(0,l.jsxs)("p",{className:"text-foreground-muted text-sm text-center",children:[null!==(en=null===($=d.ping)||void 0===$?void 0:null===(W=$.jitter)||void 0===W?void 0:W.toFixed(2))&&void 0!==en?en:"N/A"," ms"]})]})]})]}),(0,l.jsxs)(a.Zp,{children:[(0,l.jsx)(a.aR,{children:(0,l.jsxs)(a.ZB,{className:"flex items-center",children:[(0,l.jsx)(eL.A,{className:"mr-4 text-blue-600"})," Connection & Server Details"]})}),(0,l.jsx)(a.Wu,{children:(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"ISP:"}),(0,l.jsx)("p",{children:d.isp||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Internal IP:"}),(0,l.jsx)("p",{children:(null===(J=d.interface)||void 0===J?void 0:J.internalIp)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"External IP:"}),(0,l.jsx)("p",{children:(null===(K=d.interface)||void 0===K?void 0:K.externalIp)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Server Name:"}),(0,l.jsx)("p",{children:(null===(V=d.server)||void 0===V?void 0:V.name)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Location:"}),(0,l.jsx)("p",{children:(null===(Y=d.server)||void 0===Y?void 0:Y.location)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Country:"}),(0,l.jsx)("p",{children:(null===(X=d.server)||void 0===X?void 0:X.country)||"N/A"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 grid-flow-row gap-2 truncate",children:[(0,l.jsx)("p",{className:"font-medium",children:"Server IP:"}),(0,l.jsx)("p",{children:(null===(ee=d.server)||void 0===ee?void 0:ee.host)||"N/A"})]}),(null===(es=d.result)||void 0===es?void 0:es.url)&&(0,l.jsxs)("div",{className:"flex items-center gap-x-2 mt-4",children:[(0,l.jsx)(eU.A,{className:"text-blue-600 size-4"}),(0,l.jsx)("a",{href:d.result.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:underline",children:"View Full Result Online"})]})]})})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)(eE.A,{className:"text-amber-500 lg:size-16 size-8"}),(0,l.jsx)("h3",{className:"text-xl font-semibold",children:"Incomplete Test Results"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:["The test didn't complete properly. Some data may be missing.",(0,l.jsx)("span",{className:"underline cursor-pointer ml-2 block",onClick:()=>{R(),M()},children:"Run the test again"})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)(eB.A,{className:"text-primary size-8 animate-spin"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Please wait while the test is running..."})]})})()}),(0,l.jsx)(z.Es,{className:"flex justify-between gap-4",children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)(D.$,{onClick:()=>{S?o({title:"Please wait",description:"Cooldown period active"}):(R(),M())},variant:"outline",disabled:S,children:[(0,l.jsx)(eB.A,{className:"h-4 w-4"}),"Run Again"]})}),(0,l.jsx)(D.$,{onClick:()=>I(!1),children:"Close"})]}):(0,l.jsx)(l.Fragment,{children:f?(0,l.jsx)(D.$,{onClick:()=>{R(),I(!1)},variant:"destructive",children:"Cancel Test"}):(0,l.jsx)(D.$,{onClick:()=>I(!1),children:"Close"})})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(a.BT,{className:"relative flex flex-col items-center justify-center",children:S?"Please wait 10 seconds before starting another test.":f?"Test in progress...":"Run a speed test to check your internet connection."}),d?(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("div",{className:"relative flex flex-col items-center justify-center",children:(0,l.jsxs)("div",{className:"grid grid-cols-3 grid-flow-row",children:[(0,l.jsxs)("div",{className:"flex items-center mx-2",children:[(0,l.jsx)(eR.A,{className:"text-green-500 size-4 mr-1"}),(null==d?void 0:d.download)?"".concat(eq(null==d?void 0:null===(e=d.download)||void 0===e?void 0:e.bandwidth)):"N/A"]}),(0,l.jsxs)("div",{className:"flex items-center mx-2",children:[(0,l.jsx)(eM.A,{className:"text-violet-500 size-4 mr-1"}),(null==d?void 0:d.upload)?"".concat(eq(null==d?void 0:null===(s=d.upload)||void 0===s?void 0:s.bandwidth)):"N/A"]}),(0,l.jsxs)("div",{className:"flex items-center mx-2",children:[(0,l.jsx)(eD.A,{className:"text-gray-600 size-4 mr-1"}),(null==d?void 0:d.ping)?"".concat(null==d?void 0:null===(i=d.ping)||void 0===i?void 0:null===(t=i.latency)||void 0===t?void 0:t.toFixed(2)," ms"):"N/A"]})]})})}):f?(0,l.jsx)("p",{className:"text-sm text-gray-500 text-center",children:'"Test in progress..."'}):(0,l.jsx)("p",{className:"text-sm text-gray-500 text-center",children:'"Previous data not available."'})]})]})]})};var eZ=t(88926);let eH=e=>{let{data:s,isLoading:t,isPublicIPLoading:r=!1,hideSensitiveData:n}=e;return(0,l.jsx)(a.Zp,{className:"md:py-6 md:px-6 py-6 px-4 ",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-5 grid-cols-1 grid-flow-row gap-4",children:[(0,l.jsxs)("div",{className:"grid place-items-center gap-1.5",children:[(0,l.jsx)("h2",{className:"font-semibold",children:"Public IPv4 Address"}),t||r?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):n?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{children:null==s?void 0:s.networkAddressing.publicIPv4})]}),(0,l.jsxs)("div",{className:"grid place-items-center gap-1.5",children:[(0,l.jsx)("h2",{className:"font-semibold",children:"Cellular IPv4 Address"}),(0,l.jsx)("div",{className:"flex items-center gap-x-2",children:t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):n?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{children:null==s?void 0:s.networkAddressing.cellularIPv4})})]}),(0,l.jsxs)("div",{className:"grid place-items-center gap-1.5",children:[(0,l.jsx)("h2",{className:"font-semibold",children:"Cellular IPv6 Address"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):n?(0,l.jsx)("div",{className:"border-none bg-gray-600 rounded-md h-5 md:w-36 w-24"}):(0,l.jsx)("p",{children:null==s?void 0:s.networkAddressing.cellularIPv6})]}),(0,l.jsxs)("div",{className:"grid place-items-center gap-1.5",children:[(0,l.jsx)("h2",{className:"font-semibold",children:"Carrier Primary DNS"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{children:null==s?void 0:s.networkAddressing.carrierPrimaryDNS}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)("p",{children:null==s?void 0:s.networkAddressing.rawCarrierPrimaryDNS})})]})})]}),(0,l.jsxs)("div",{className:"grid place-items-center gap-1.5",children:[(0,l.jsx)("h2",{className:"font-semibold",children:"Carrier Secondary DNS"}),t?(0,l.jsx)(i.E,{className:"h-4 w-[100px]"}):(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{children:null==s?void 0:s.networkAddressing.carrierSecondaryDNS}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)("p",{children:null==s?void 0:s.networkAddressing.rawCarrierSecondaryDNS})})]})})]})]})})};var eQ=t(99015),eW=t(13624);let e$=e=>{let{lteTimeAdvance:s="0",nrTimeAdvance:t="0",isLoading:n=!1,networkType:c="Unknown"}=e,[o,d]=(0,r.useState)("km"),[m,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{u(!0);let e=await fetch("/cgi-bin/quecmanager/settings/measurement_units.sh"),s=await e.json();"success"===s.status&&s.data&&d(s.data.unit)}catch(e){console.error("Error fetching measurement unit:",e),d("km")}finally{u(!1)}})()},[]);let x=s&&"Unknown"!==s&&"-"!==s&&parseInt(s,10)||0,h=t&&"Unknown"!==t&&"-"!==t&&parseInt(t,10)||0,p=x>0?(e=>((e<0||e>1282)&&(console.warn("Invalid LTE TA value: ".concat(e,", using 0 instead")),e=0),1/3072e4*(16*e)*3e8/2/1e3))(x):0,v=h>0?(e=>(e<0&&(console.warn("Invalid negative NTA value: ".concat(e,", using 0 instead")),e=0),3e8*e*(1/196608e4)/2/1e3))(h):0,f=e=>.621371*e,j=e=>{if(0===e)return"-";if("mi"===o){let s=f(e);if(s<1){let e=5280*s;return"".concat(e.toFixed(0)," ft")}return"".concat(s.toFixed(2)," mi")}return e<1?"".concat((1e3*e).toFixed(0)," m"):"".concat(e.toFixed(2)," km")};return(0,l.jsxs)(a.Zp,{className:"overflow-hidden",children:[(0,l.jsx)(a.aR,{children:(0,l.jsx)(a.ZB,{children:"Distance to Cell Tower"})}),(0,l.jsx)(a.Wu,{children:n||m?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(eQ.A,{className:"h-4 w-4 mr-1.5"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"LTE"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(i.E,{className:"h-4 w-16 mr-2"}),(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{asChild:!0,children:(0,l.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)(i.E,{className:"h-4 w-16 mr-2"})})]})})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(eQ.A,{className:"h-4 w-4 mr-1.5"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"NR5G"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(i.E,{className:"h-4 w-16 mr-2"}),(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{asChild:!0,children:(0,l.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(g.ZI,{children:(0,l.jsx)(i.E,{className:"h-4 w-16 mr-2"})})]})})]})]})]}):(0,l.jsxs)("div",{className:"space-y-3",children:[x>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(eQ.A,{className:"h-4 w-4 mr-1.5"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"LTE"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("p",{className:"mr-2",children:j(p)}),(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{asChild:!0,children:(0,l.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(g.ZI,{children:(0,l.jsxs)("p",{className:"max-w-xs text-xs mr-2",children:["LTE TA ",x]})})]})})]})]}),h>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(eQ.A,{className:"h-4 w-4 mr-1.5"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"NR5G"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("p",{className:"mr-2",children:j(v)}),(0,l.jsx)(g.TooltipProvider,{children:(0,l.jsxs)(g.m_,{children:[(0,l.jsx)(g.k$,{asChild:!0,children:(0,l.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(g.ZI,{children:(0,l.jsxs)("p",{className:"max-w-xs text-xs mr-2",children:["NTA ",h]})})]})})]})]}),!x&&!h&&(0,l.jsx)("div",{className:"h-16 flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-muted-foreground text-sm",children:"No timing advance data available"})})]})})]})};var eJ=t(94513);let eK=()=>{var e,s,t;let{toast:a}=(0,n.dj)(),[i,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),{data:u,isLoading:x,refresh:g,isPublicIPLoading:f}=ew(),{dataConnectionState:j,isStateLoading:N,refresh:w,isPingMonitoringActive:b}=eb(),{isRunningDiagnostics:y,runDiagnosticsData:S,startDiagnostics:A}=eC(),{showWarning:I,usagePercentage:k,formattedUsage:E,formattedLimit:R,remaining:P,dismissWarning:q,closeWarning:Z}=(0,eI.A)(),{bytesSent:H,bytesReceived:Q,refresh:W}=eS(),$=async()=>{try{var e,s;let t=await (0,eZ.a)("AT+QUIMSLOT?"),l=null===(e=t.response)||void 0===e?void 0:e.raw_output.split("\n")[1].split(":")[1].trim(),r=await (0,eZ.a)("1"===l?"AT+QUIMSLOT=2":"AT+QUIMSLOT=1");if("error"===r.status||(null===(s=r.response)||void 0===s?void 0:s.status)==="error")throw Error("Failed to change SIM slot");a({title:"SIM Slot Changed",description:"The SIM slot has been changed successfully"}),setTimeout(async()=>{await (0,eZ.a)("AT+COPS=2"),setTimeout(async()=>{let e=await (0,eZ.a)("AT+COPS=0");if("error"===e.status)throw Error("Failed to reconnect to the network");a({title:"Network Reconnected",description:"The device has been reconnected to the network"})},2e3)},3e3),setTimeout(J,3e3)}catch(e){console.error("Error changing SIM slot:",e),a({variant:"destructive",title:"SIM Slot Change Failed",description:e instanceof Error?e.message:"Failed to change the SIM slot"})}},J=(0,r.useCallback)(async()=>{try{await Promise.all([g(),w(),W()])}catch(e){console.error("Error refreshing data:",e),a({variant:"destructive",title:"Refresh Failed",description:"Failed to refresh the data"})}},[g,w,W]),[K,V]=(0,r.useState)([]),Y=async()=>{try{await A()}catch(e){a({variant:"destructive",title:"Diagnostics Failed",description:"Failed to run diagnostics"})}};return(0,r.useEffect)(()=>{if(u&&u.currentBands){var e;let s=null===(e=u.currentBands.id)||void 0===e?void 0:e.map((e,s)=>{var t,l,r,n,a,i,c;return{id:e,bandNumber:(null===(t=u.currentBands.bandNumber)||void 0===t?void 0:t[s])||"N/A",earfcn:(null===(l=u.currentBands.earfcn)||void 0===l?void 0:l[s])||"N/A",bandwidth:(null===(r=u.currentBands.bandwidth)||void 0===r?void 0:r[s])||"N/A",pci:(null===(n=u.currentBands.pci)||void 0===n?void 0:n[s])||"N/A",rsrp:(null===(a=u.currentBands.rsrp)||void 0===a?void 0:a[s])||"N/A",rsrq:(null===(i=u.currentBands.rsrq)||void 0===i?void 0:i[s])||"N/A",sinr:(null===(c=u.currentBands.sinr)||void 0===c?void 0:c[s])||"N/A"}});s&&V(s)}},[u]),(0,r.useEffect)(()=>{var e,s;(null==u?void 0:null===(s=u.simCard)||void 0===s?void 0:null===(e=s.state)||void 0===e?void 0:e.toLowerCase().includes("failed"))&&a({title:"SMS_Tool failed to acquire token",description:"The system will attempt to recover automatically. If this issue persists, please logout and log back in or restart the device.",variant:"destructive"}),x||(null==u?void 0:u.simCard.state)!=="Not Inserted"||c(!0)},[u,x]),(0,l.jsxs)("div",{className:"grid xl:gap-y-10 gap-y-8 gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,l.jsx)("h1",{className:"xl:text-3xl text-base font-bold",children:"Connection Summary"}),(0,l.jsx)(D.$,{variant:"ghost",size:"icon",className:"text-sm",onClick:J,children:(0,l.jsx)(U.A,{className:"xl:size-6 size-5 text-blue-500",strokeWidth:3})})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,l.jsxs)(D.$,{onClick:()=>m(e=>!e),children:[d?(0,l.jsx)(L.A,{className:"xl:size-6 size-5"}):(0,l.jsx)(G.A,{className:"xl:size-6 size-5"}),(0,l.jsxs)("span",{className:"hidden md:block",children:[d?"Show":"Hide"," Sensitive Data"]})]}),(null==u?void 0:u.simCard.state)==="Not Inserted"&&(0,l.jsxs)(z.lG,{open:i,onOpenChange:c,children:[(0,l.jsx)(z.zM,{asChild:!0,children:(0,l.jsxs)(D.$,{variant:"destructive",children:[(0,l.jsx)(ek.fU4,{className:"xl:size-6 size-5"}),(0,l.jsx)("span",{className:"hidden md:block",children:"No SIM"})]})}),(0,l.jsxs)(z.Cf,{className:"max-w-xs md:max-w-lg",children:[(0,l.jsx)(z.c7,{children:(0,l.jsx)(z.L3,{children:"No SIM Detected"})}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(ek.fU4,{className:"xl:size-14 md:size-12 size-6 text-red-500"})}),(0,l.jsx)("p",{className:"text-center",children:"There is no SIM card detected in the device. Please insert a SIM card or change the SIM card slot to use the device."})]}),(0,l.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,l.jsx)(D.$,{onClick:$,className:"mr-2",children:"Change SIM Slot"}),(0,l.jsx)(z.HM,{asChild:!0,children:(0,l.jsx)(D.$,{variant:"secondary",onClick:()=>c(!1),children:"Close"})})]})]})]}),(0,l.jsxs)(z.lG,{children:[(0,l.jsx)(z.zM,{asChild:!0,children:(0,l.jsxs)(D.$,{onClick:Y,children:[(0,l.jsx)(B.A,{className:"xl:size-6 size-5"}),(0,l.jsx)("span",{className:"hidden md:block",children:"Run Diagnostics"})]})}),!y&&(0,l.jsxs)(z.Cf,{className:"max-w-xs md:max-w-lg",children:[(0,l.jsx)(z.c7,{children:(0,l.jsx)(z.L3,{children:"Diagnostics Result"})}),(0,l.jsx)(z.rr,{children:"This is the result of the diagnostic test ran on your device."}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Network Registration "}),(null==S?void 0:S.netRegistration)==="Registered"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"U-SIM State"}),(null==S?void 0:S.simState)==="READY"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Manual APN"}),(null==S?void 0:S.manualAPN)==="Enabled"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"WAN IP"}),(null==S?void 0:S.wanIP)==="Connected"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Cellular Signal"}),(null==S?void 0:S.cellSignal)==="Good"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Modem Temperature"}),(null==S?void 0:S.modemTemp)==="Normal"?(0,l.jsx)(F.A,{className:"text-green-500"}):(0,l.jsx)(_.A,{className:"text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Network Reject Causes"}),(0,l.jsx)("div",{className:"flex flex-col items-end space-y-1",children:(null==S?void 0:S.rejectCauses)?(0,l.jsxs)(l.Fragment,{children:[S.rejectCauses.emm&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(_.A,{className:"text-red-500 w-4 h-4"}),(0,l.jsxs)("span",{className:"text-sm",children:["EMM (",S.rejectCauses.emm.code,"):"," ",S.rejectCauses.emm.description]})]}),S.rejectCauses.esm&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(_.A,{className:"text-red-500 w-4 h-4"}),(0,l.jsxs)("span",{className:"text-sm",children:["ESM (",S.rejectCauses.esm.code,"):"," ",S.rejectCauses.esm.description]})]}),S.rejectCauses.nrmm&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(_.A,{className:"text-red-500 w-4 h-4"}),(0,l.jsxs)("span",{className:"text-sm",children:["NRMM (",S.rejectCauses.nrmm.code,"):"," ",S.rejectCauses.nrmm.description]})]})]}):(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(F.A,{className:"text-green-500"}),(0,l.jsx)("span",{children:"None"})]})})]})]})]}),y&&(0,l.jsxs)(z.Cf,{className:"max-w-xs md:max-w-lg",children:[(0,l.jsx)(z.c7,{children:(0,l.jsx)(z.L3,{children:"Running Diagnostics"})}),(0,l.jsx)("div",{className:"flex items-center justify-center my-4",children:(0,l.jsx)(O(),{color:"#6D28D9"})}),(0,l.jsx)(z.rr,{className:"text-center",children:"Please wait while we run diagnostics on your device."})]})]})]})]}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-2 grid-cols-1 grid-flow-row gap-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(C,{})}),(0,l.jsxs)("div",{className:"grid gap-2 lg:grid-cols-2 grid-cols-1 grid-flow-row",children:[(0,l.jsx)(e$,{lteTimeAdvance:null==u?void 0:null===(e=u.timeAdvance)||void 0===e?void 0:e.lteTimeAdvance,nrTimeAdvance:null==u?void 0:null===(s=u.timeAdvance)||void 0===s?void 0:s.nrTimeAdvance,isLoading:x,networkType:null==u?void 0:null===(t=u.connection)||void 0===t?void 0:t.networkType}),(0,l.jsx)(T,{}),(0,l.jsx)(eO,{}),(0,l.jsx)(M,{})]})]}),(0,l.jsxs)("div",{className:"grid 2xl:grid-cols-4 lg:grid-cols-2 grid-cols-1 gap-4",children:[(0,l.jsx)(o,{data:u,isLoading:x,hideSensitiveData:d}),(0,l.jsx)(h,{data:u,isLoading:x,dataConnectionState:j,connectionStateLoading:N}),(0,l.jsx)(p,{data:u,isLoading:x,bytesSent:H,bytesReceived:Q}),(0,l.jsx)(v,{data:u,isLoading:x})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 w-full",children:[(0,l.jsx)("h1",{className:"xl:text-3xl text-base font-bold",children:"Active Addresses"}),(0,l.jsx)("div",{children:(0,l.jsx)(eH,{data:u,isLoading:x,isPublicIPLoading:f,hideSensitiveData:d})})]}),(0,l.jsxs)("div",{className:"grid gap-4 w-full",children:[(0,l.jsx)("h1",{className:"xl:text-3xl text-base font-bold",children:"Current Active Bands"}),(0,l.jsx)("div",{children:(0,l.jsx)(X,{bands:K,isLoading:x})})]}),(0,l.jsx)(eJ.A,{open:I,onClose:Z,onDismiss:q,usagePercentage:k,currentUsage:E.total,monthlyLimit:R,remaining:P})]})}},45934:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var l=t(20475);t(20107);var r=t(29395),n=t(22250);let a=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,l.jsx)("div",{className:(0,n.cn)(a({variant:t}),s),...r})}},1307:(e,s,t)=>{"use strict";t.d(s,{II:()=>h,Nt:()=>p,at:()=>u});var l=t(20475),r=t(20107),n=t(81155),a=t(58601),i=t(58736),c=t(22250);let o={light:"",dark:".dark"},d=r.createContext(null);function m(){let e=r.useContext(d);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let u=r.forwardRef((e,s)=>{let{id:t,className:a,children:i,config:o,...m}=e,u=r.useId(),h="chart-".concat(t||u.replace(/:/g,""));return(0,l.jsx)(d.Provider,{value:{config:o},children:(0,l.jsxs)("div",{"data-chart":h,ref:s,className:(0,c.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...m,children:[(0,l.jsx)(x,{id:h,config:o}),(0,l.jsx)(n.u,{children:i})]})})});u.displayName="Chart";let x=e=>{let{id:s,config:t}=e,r=Object.entries(t).filter(e=>{let[s,t]=e;return t.theme||t.color});return r.length?(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(o).map(e=>{let[t,l]=e;return"\n".concat(l," [data-chart=").concat(s,"] {\n").concat(r.map(e=>{var s;let[l,r]=e,n=(null===(s=r.theme)||void 0===s?void 0:s[t])||r.color;return n?"  --color-".concat(l,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},h=a.m,p=r.forwardRef((e,s)=>{let{active:t,payload:n,className:a,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:u,labelFormatter:x,labelClassName:h,formatter:p,color:v,nameKey:f,labelKey:j}=e,{config:N}=m(),w=r.useMemo(()=>{var e;if(o||!(null==n?void 0:n.length))return null;let[s]=n,t="".concat(j||s.dataKey||s.name||"value"),r=g(N,s,t),a=j||"string"!=typeof u?null==r?void 0:r.label:(null===(e=N[u])||void 0===e?void 0:e.label)||u;return x?(0,l.jsx)("div",{className:(0,c.cn)("font-medium",h),children:x(a,n)}):a?(0,l.jsx)("div",{className:(0,c.cn)("font-medium",h),children:a}):null},[u,x,n,o,h,N,j]);if(!t||!(null==n?void 0:n.length))return null;let b=1===n.length&&"dot"!==i;return(0,l.jsxs)("div",{ref:s,className:(0,c.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",a),children:[b?null:w,(0,l.jsx)("div",{className:"grid gap-1.5",children:n.map((e,s)=>{let t="".concat(f||e.name||e.dataKey||"value"),r=g(N,e,t),n=v||e.payload.fill||e.color;return(0,l.jsx)("div",{className:(0,c.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,s,e.payload):(0,l.jsxs)(l.Fragment,{children:[(null==r?void 0:r.icon)?(0,l.jsx)(r.icon,{}):!d&&(0,l.jsx)("div",{className:(0,c.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":b&&"dashed"===i}),style:{"--color-bg":n,"--color-border":n}}),(0,l.jsxs)("div",{className:(0,c.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,l.jsxs)("div",{className:"grid gap-1.5",children:[b?w:null,(0,l.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,l.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function g(e,s,t){if("object"!=typeof s||null===s)return;let l="payload"in s&&"object"==typeof s.payload&&null!==s.payload?s.payload:void 0,r=t;return t in s&&"string"==typeof s[t]?r=s[t]:l&&t in l&&"string"==typeof l[t]&&(r=l[t]),r in e?e[r]:e[t]}p.displayName="ChartTooltip",i.s,r.forwardRef((e,s)=>{let{className:t,hideIcon:r=!1,payload:n,verticalAlign:a="bottom",nameKey:i}=e,{config:o}=m();return(null==n?void 0:n.length)?(0,l.jsx)("div",{ref:s,className:(0,c.cn)("flex items-center justify-center gap-4","top"===a?"pb-3":"pt-3",t),children:n.map(e=>{let s="".concat(i||e.dataKey||"value"),t=g(o,e,s);return(0,l.jsxs)("div",{className:(0,c.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!r?(0,l.jsx)(t.icon,{}):(0,l.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null}).displayName="ChartLegend"},23484:(e,s,t)=>{"use strict";t.d(s,{QI:()=>a,U_:()=>l,ZK:()=>r,jq:()=>n});let l={6:"1.4 MHz",15:"3 MHz",25:"5 MHz",50:"10 MHz",75:"15 MHz",100:"20 MHz","-":"-"},r={0:"No cause",2:"IMSI unknown in HSS",3:"Illegal UE",5:"IMEI not accepted",6:"Illegal ME",7:"EPS services not allowed",8:"EPS services and non-EPS services not allowed",9:"UE identity cannot be derived by the network",10:"Implicitly detached",11:"PLMN not allowed",12:"Tracking Area not allowed",13:"Roaming not allowed in this tracking area",14:"EPS services not allowed in this PLMN",15:"No Suitable Cells in tracking area",16:"MSC temporarily not reachable",17:"Network failure",18:"CS domain not available",19:"ESM failure",20:"MAC failure",21:"Synch failure",22:"Congestion",23:"UE security capabilities mismatch",24:"Security mode rejected, unspecified",25:"Not authorized for this CSG",26:"Non-EPS authentication unacceptable",31:"Redirection to 5GCN required",35:"Requested service option not authorized in this PLMN",39:"CS service temporarily not available",40:"No EPS bearer context activated",42:"Severe network failure",95:"Semantically incorrect message",96:"Invalid mandatory information",97:"Message type non-existent or not implemented",98:"Message type not compatible with the protocol state",99:"Information element non-existent or not implemented",100:"Conditional IE error",101:"Message not compatible with the protocol state",111:"Protocol error, unspecified"},n={0:"No cause",8:"Operator Determined Barring",26:"Insufficient resources",27:"Missing or unknown APN",28:"Unknown PDN type",29:"User authentication failed",30:"Request rejected by Serving GW or PDN GW",31:"Request rejected, unspecified",32:"Service option not supported",33:"Requested service option not subscribed",34:"Service option temporarily out of order",35:"PTI already in use",36:"Regular deactivation",37:"EPS QoS not accepted",38:"Network failure",39:"Reactivation requested",41:"Semantic error in the TFT operation",42:"Syntactical error in the TFT operation",43:"Invalid EPS bearer identity",44:"Semantic errors in packet filter(s)",45:"Syntactical errors in packet filter(s)",46:"Unused (see NOTE 2)",47:"PTI mismatch",49:"Last PDN disconnection not allowed",50:"PDN type IPv4 only allowed",51:"PDN type IPv6 only allowed",52:"Single address bearers only allowed",53:"ESM information not received",54:"PDN connection does not exist",55:"Multiple PDN connections for a given APN not allowed",56:"Collision with network initiated request",57:"PDN type IPv4v6 only allowed",58:"PDN type non IP only allowed",59:"Unsupported QCI value",60:"Bearer handling not supported",61:"PDN type Ethernet only allowed",65:"Maximum number of EPS bearers reached",66:"Requested APN not supported in current RAT and PLMN combination",81:"Invalid PTI value",95:"Semantically incorrect message",96:"Invalid mandatory information",97:"Message type non-existent or not implemented",98:"Message type not compatible with the protocol state",99:"Information element non-existent or not implemented",100:"Conditional IE error",101:"Message not compatible with the protocol state",111:"Protocol error, unspecified",112:"APN restriction value incompatible with active EPS bearer context",113:"Multiple accesses to a PDN connection not allowed"},a={0:"No cause",3:"Illegal UE",5:"PEI not accepted",6:"Illegal ME",7:"5GS services not allowed",9:"UE identity cannot be derived by the network",10:"Implicitly de-registered",11:"PLMN not allowed",12:"Tracking area not allowed",13:"Roaming not allowed in this tracking area",15:"No suitable cells in tracking area",20:"MAC failure",21:"Synch failure",22:"Congestion",23:"UE security capabilities mismatch",24:"Security mode rejected, unspecified",26:"Non-5G authentication unacceptable",27:"N1 mode not allowed",28:"Restricted service area",31:"Redirection to EPC required",43:"LADN not available",62:"No network slices available",65:"Maximum number of PDU sessions reached",67:"Insufficient resources for specific slice and DNN",69:"Insufficient resources for specific slice",71:"ngKSI already in use",72:"Non-3GPP access to 5GCN not allowed",73:"Serving network not authorized",74:"Temporarily not authorized for this SNPN",75:"Permanently not authorized for this SNPN",76:"Not authorized for this CAG or authorized for CAG cells only",77:"Wireline access area not allowed",78:"PLMN not allowed to operate at the present UE location",79:"UAS services not allowed",90:"Payload was not forwarded",91:"DNN not supported or not subscribed in the slice",92:"Insufficient user-plane resources for the PDU session",95:"Semantically incorrect message",96:"Invalid mandatory information",97:"Message type non-existent or not implemented",98:"Message type not compatible with the protocol state",99:"Information element non-existent or not implemented",100:"Conditional IE error",101:"Message not compatible with the protocol state",111:"Protocol error, unspecified"}},88926:(e,s,t)=>{"use strict";t.d(s,{a:()=>l});let l=async function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{var l;let r=e.trim().toUpperCase().startsWith("AT")?e.trim():"AT".concat(e.trim()),n=encodeURIComponent(r),a="/cgi-bin/quecmanager/at_cmd/at_queue_client.sh?command=".concat(n);s&&(a+="&wait=1&timeout=".concat(t));let i=await fetch(a,{method:"GET",headers:{Accept:"application/json",Authorization:"".concat(localStorage.getItem("authToken"))},signal:AbortSignal.timeout(1e3*t+5e3)});if(!i.ok)throw Error("AT command failed with status: ".concat(i.status));let c=await i.json();if(c.error)throw Error("AT queue error: ".concat(c.error));if(s&&(null===(l=c.response)||void 0===l?void 0:l.status)==="timeout")throw Error("AT command timed out after ".concat(t," seconds"));return c}catch(e){throw console.error("AT Command error:",e),e}}}},e=>{var s=s=>e(e.s=s);e.O(0,[9980,9649,7780,8885,3746,9464,3048,1074,3095,1178,9166,191,6035,7358],()=>s(98722)),_N_E=e.O()}]);