(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4481],{66437:(e,t,s)=>{Promise.resolve().then(s.bind(s,83143))},83143:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(20475),a=s(20107),n=s(72167),i=s(64219),o=s(18861),l=s(42541),d=s(32857),c=s(49573),u=s(29475);let f=()=>{let[e,t]=(0,a.useState)("0"),[s,f]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)(""),[v,x]=(0,a.useState)(""),[b,T]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),{toast:j}=(0,d.dj)();(0,a.useEffect)(()=>{(async()=>{m(!0);try{let e=await fetch("/cgi-bin/quecmanager/advance/ttl.sh");if(!e.ok)throw Error("Failed to fetch TTL settings: ".concat(e.statusText));let s=await e.json(),r=await fetch("/cgi-bin/quecmanager/profiles/check_status.sh");if(!r.ok)throw Error("Failed to fetch profile status: ".concat(r.statusText));let a=await r.json();console.log("TTL Data:",s),console.log("Profile Status:",a);let n=!1,i=s.currentValue.toString(),o=s.isEnabled;if("success"===a.status&&a.profile&&"unknown"!==a.profile&&"none"!==a.profile){let e=await fetch("/cgi-bin/quecmanager/profiles/list_profiles.sh");if(e.ok){let t=await e.json();if("success"===t.status&&Array.isArray(t.profiles)){let e=t.profiles.find(e=>e.name===a.profile);e&&e.ttl&&parseInt(e.ttl)>0&&(T(e),n=!0,i=e.ttl,o=!0)}}}t(i),f(o),w(n)}catch(e){console.error("Error fetching data:",e),h(e instanceof Error?e.message:"Failed to fetch TTL settings"),j({variant:"destructive",title:"Error fetching settings",description:e instanceof Error?e.message:"Failed to fetch TTL settings"})}finally{m(!1)}})()},[]);let N=async t=>{t.preventDefault(),h(""),x("");let r=s?e:"0";try{let e=await fetch("/cgi-bin/quecmanager/advance/ttl.sh",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"ttl=".concat(r)});if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));let t=await e.json();if(!0===t.success)x("Settings saved successfully"),j({title:"Success",description:"TTL settings saved successfully"});else throw Error(t.error||"Failed to save settings")}catch(e){h(e instanceof Error?e.message:"Failed to save settings"),j({variant:"destructive",title:"Error saving settings",description:e instanceof Error?e.message:"Failed to save TTL settings"})}};return(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"TTL Settings"}),(0,r.jsx)(n.BT,{children:"Configure TTL mangling for your connection."})]}),(0,r.jsxs)(n.Wu,{children:[y&&b&&(0,r.jsxs)(c.Fc,{className:"mb-6",children:[(0,r.jsx)(u.A,{className:"h-4 w-4",color:"orange"}),(0,r.jsx)(c.XL,{children:"Profile Controlled"}),(0,r.jsxs)(c.TN,{children:['TTL is currently being managed by profile "',b.name,'".']})]}),p&&(0,r.jsxs)(c.Fc,{variant:"destructive",className:"mb-6",children:[(0,r.jsx)(c.XL,{children:"Error"}),(0,r.jsx)(c.TN,{children:p})]}),v&&(0,r.jsxs)(c.Fc,{className:"mb-6",children:[(0,r.jsx)(c.XL,{children:"Success"}),(0,r.jsx)(c.TN,{children:v})]}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"TTL Value"}),(0,r.jsx)(i.p,{type:"number",min:"0",max:"255",value:e,onChange:e=>t(e.target.value),disabled:!s||y||g,className:"mt-1"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Set the TTL value for your connection (0-255)."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-base font-medium",children:"TTL State"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Toggle to enable or disable TTL mangling"})]}),(0,r.jsx)(o.d,{checked:s,onCheckedChange:f,disabled:y||g})]})]}),(0,r.jsx)(l.$,{type:"submit",className:"w-full",disabled:g||y,children:"Save Configuration"})]})]})]})}},49573:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>c,XL:()=>d});var r=s(20475),a=s(20107),n=s(29395),i=s(22250);let o=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:a}),s),...n})});l.displayName="Alert";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});d.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},42541:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var r=s(20475),a=s(20107),n=s(61837),i=s(29395),o=s(22250);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},72167:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var r=s(20475),a=s(20107),n=s(22250);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},64219:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(20475),a=s(20107),n=s(22250);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},18861:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var r=s(20475),a=s(20107),n=s(80982),i=s(22250);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,r.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});o.displayName=n.bL.displayName},32857:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f,oR:()=>u});var r=s(20107);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(64901),a=s(868);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[7780,1630,191,6035,7358],()=>t(66437)),_N_E=e.O()}]);