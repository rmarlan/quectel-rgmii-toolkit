(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{91565:(e,t,a)=>{Promise.resolve().then(a.bind(a,63088))},63088:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var r=a(20475),s=a(20107),o=a(72167),n=a(97818),i=a(46235),l=a(52161),d=a(78737),c=a(42541),u=a(36760),m=a(32857),f=a(43496),p=a(88926),h=a(59166),x=a(22250);function g(e){let{className:t,...a}=e;return(0,r.jsx)(h.A,{role:"status","aria-label":"Loading",className:(0,x.cn)("size-4 animate-spin",t),...a})}let w=()=>{let[e,t]=(0,s.useState)(!1),[a,h]=(0,s.useState)(!1),[x,w]=(0,s.useState)([{id:"nr5g",name:"NR5G"},{id:"lte",name:"LTE"},{id:"wcdma",name:"WCDMA"}]),{toast:v}=(0,m.dj)(),[y,N]=(0,s.useState)(null),j=e=>{N(e)},b=(e,t)=>{if(e.preventDefault(),null===y||y===t)return;let a=[...x],r=a[y];a.splice(y,1),a.splice(t,0,r),w(a),N(t)},T=()=>{N(null)},A=e=>{switch(e){case"nr5g":return"bg-[#1E86FF]";case"lte":return"bg-[#00C9A7]";case"wcdma":return"bg-[#FF3D71]";default:return"bg-gray-600"}},E=async e=>{try{console.log("Executing AT command:",e);let t=await (0,p.a)(e);if("error"===t.status||"timeout"===t.status)throw Error(t.response||"Command execution failed");return"success"===t.status}catch(e){throw console.error("AT command execution error:",e),e}},R=async()=>{try{t(!0);let e=await fetch("/cgi-bin/quecmanager/at_cmd/fetch_data.sh?set=10"),a=await e.json();if(a&&a.length>0&&"success"===a[0].status){let e=a[0].response,t=e.match(/"rat_acq_order"[,:]\s*([A-Z0-9:]+)/i);if(t&&t[1]){let e=t[1].split(":"),a=[],r={NR5G:{id:"nr5g",name:"NR5G"},LTE:{id:"lte",name:"LTE"},WCDMA:{id:"wcdma",name:"WCDMA"}};e.forEach(e=>{let t=e.toUpperCase().trim();r[t]&&a.push(r[t])}),Object.values(r).forEach(e=>{a.find(t=>t.id===e.id)||a.push(e)}),w(a)}else console.error("Failed to parse RAT order from response:",e)}else console.error("Invalid or error response from device")}catch(e){console.error("Error fetching RAT priority:",e)}finally{t(!1)}},C=async()=>{if(a||(h(!0),0===x.length))return;let e=x.map(e=>{switch(e.id){case"nr5g":return"NR5G";case"lte":return"LTE";case"wcdma":return"WCDMA";default:return""}}).filter(e=>""!==e).join(":");try{await E('AT+QNWPREFCFG="rat_acq_order",'.concat(e))&&v({title:"RAT priority saved",description:"The new network priority has been saved."}),await new Promise(e=>setTimeout(e,1500)),await E("AT+CFUN=1,1")?v({title:"Device reboot command sent",description:"The device is rebooting to apply changes."}):console.error("Failed to send device reboot command")}catch(e){console.error("Error saving RAT priority:",e)}finally{h(!1)}};return(0,s.useEffect)(()=>{R()},[]),(0,r.jsx)("div",{children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Network Priority"}),(0,r.jsx)(o.BT,{children:"Manage and prioritize network mode (RAT) for optimal performance. Requires a device reboot to apply changes."})]}),(0,r.jsx)(o.Wu,{children:e?(0,r.jsxs)("div",{className:"grid space-y-2 w-full",children:[(0,r.jsx)(u.E,{className:"h-12 w-full"}),(0,r.jsx)(u.E,{className:"h-12 w-full"}),(0,r.jsx)(u.E,{className:"h-12 w-full"})]}):(0,r.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,r.jsxs)(o.Zp,{draggable:!0,onDragStart:()=>j(t),onDragOver:e=>b(e,t),onDragEnd:T,className:"flex items-center justify-between px-4 py-3 border-none bg-background rounded-xl cursor-move hover:bg-accent transition-all duration-200 drop-shadow-lg ".concat(y===t?"opacity-50 scale-95":""),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i.A,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsxs)("div",{className:"flex items-center gap-x-3 ml-2",children:[(0,r.jsx)("div",{className:"rounded-xl size-8 p-1 ".concat(A(e.id)," flex justify-center items-center"),children:(0,r.jsx)(f.C9g,{className:"h-4 w-4 text-white"})}),(0,r.jsx)("span",{className:"font-medium",children:e.name})]})]}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Priority ",t+1]})]},e.id))})}),(0,r.jsx)(o.wL,{className:"border-t py-4",children:(0,r.jsxs)(n.Lt,{children:[(0,r.jsx)(n.tv,{asChild:!0,children:(0,r.jsxs)(c.$,{disabled:e||a||0===x.length,children:[a?(0,r.jsx)(g,{className:"h-4 w-4"}):(0,r.jsx)(l.A,{className:"h-4 w-4"}),a?"Saving...":"Save Changes"]})}),(0,r.jsxs)(n.EO,{children:[(0,r.jsxs)(n.wd,{children:[(0,r.jsx)(n.r7,{children:"Do you want to continue?"}),(0,r.jsx)(n.$v,{children:"Changes to network priority will take effect after the device reboots. Do you want to reboot now?"})]}),(0,r.jsxs)(n.ck,{children:[(0,r.jsx)(n.Zr,{disabled:e||a,children:"Cancel"}),(0,r.jsxs)(n.Rx,{onClick:C,disabled:e||a,children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Reboot Now"]})]})]})]})})]})})}},97818:(e,t,a)=>{"use strict";a.d(t,{$v:()=>x,EO:()=>m,Lt:()=>l,Rx:()=>g,Zr:()=>w,ck:()=>p,r7:()=>h,tv:()=>d,wd:()=>f});var r=a(20475),s=a(20107),o=a(50564),n=a(22250),i=a(42541);let l=o.bL,d=o.l9,c=o.ZL,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});u.displayName=o.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(o.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});m.displayName=o.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="AlertDialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",a),...s})});h.displayName=o.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=o.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.rc,{ref:t,className:(0,n.cn)((0,i.r)(),a),...s})});g.displayName=o.rc.displayName;let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.ZD,{ref:t,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});w.displayName=o.ZD.displayName},42541:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>l});var r=a(20475),s=a(20107),o=a(61837),n=a(29395),i=a(22250);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},72167:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>u});var r=a(20475),s=a(20107),o=a(22250);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},36760:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(20475),s=a(22250);function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},32857:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m,oR:()=>u});var r=a(20107);let s=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var r=a(64901),s=a(868);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},88926:(e,t,a)=>{"use strict";a.d(t,{a:()=>r});let r=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{let a=e.trim().toUpperCase().startsWith("AT")?e.trim():"AT".concat(e.trim()),r=encodeURIComponent(a),s="/cgi-bin/quecmanager/at_cmd/at_queue_client.sh?command=".concat(r);30!==t&&(s+="&timeout=".concat(t));let o=await fetch(s,{method:"GET",headers:{Accept:"application/json",Authorization:"".concat(localStorage.getItem("authToken"))},signal:AbortSignal.timeout(1e3*t+5e3)});if(!o.ok)throw Error("AT command failed with status: ".concat(o.status));let n=await o.json();if(n.error)throw Error("AT queue error: ".concat(n.error));if("error"===n.status)throw Error("AT command failed: ".concat(n.response||"Unknown error"));return n}catch(e){throw console.error("AT Command error:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[9742,7780,8885,9464,241,3212,191,6035,7358],()=>t(91565)),_N_E=e.O()}]);