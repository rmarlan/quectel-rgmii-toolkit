"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9166],{94513:(e,a,t)=>{t.d(a,{A:()=>l});var r=t(20475);t(20107);var s=t(93557),n=t(42541),o=t(49573),i=t(12607);let l=e=>{let{open:a,onClose:t,onDismiss:l,usagePercentage:d,currentUsage:c,monthlyLimit:u,remaining:g,onOpenSettings:f}=e,m=d>=100,h=d>=95;return(0,r.jsx)(s.lG,{open:a,onOpenChange:t,children:(0,r.jsxs)(s.Cf,{className:"sm:max-w-[500px]",children:[(0,r.jsxs)(s.c7,{children:[(0,r.jsx)(s.L3,{className:"flex items-center gap-2",children:m?"Data Limit Exceeded":h?"Approaching Data Limit":"Data Usage Warning"}),(0,r.jsx)(s.rr,{children:m?"You have exceeded your monthly data limit. Your connection may be throttled or additional charges may apply.":h?"You're very close to reaching your monthly data limit. Consider monitoring your usage closely.":"You're approaching your monthly data usage limit. You may want to monitor your usage more carefully."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Current Usage"}),(0,r.jsx)("span",{className:"font-medium",children:c})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 dark:bg-gray-700",children:(0,r.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat(m?"bg-red-500":h?"bg-orange-500":"bg-yellow-500"),style:{width:"".concat(Math.min(d,100),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,r.jsx)("span",{children:"0 GB"}),(0,r.jsx)("span",{children:u})]})]}),(0,r.jsxs)(o.Fc,{variant:m?"destructive":"default",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)(o.XL,{className:"font-bold",children:m?"Limit Exceeded":h?"Approaching Limit":"Usage Warning"}),(0,r.jsx)(o.TN,{children:m?(0,r.jsx)(r.Fragment,{children:"You've used all of your monthly data allowance. Consider upgrading your plan or enabling data-saving features."}):h?(0,r.jsx)(r.Fragment,{children:"You have very little data remaining. Monitor your usage carefully to avoid overages."}):(0,r.jsx)(r.Fragment,{children:"You're approaching your monthly limit. Consider adjusting your usage patterns or increasing your limit."})})]})]}),(0,r.jsx)(s.Es,{children:(0,r.jsx)(n.$,{onClick:l,variant:m?"destructive":"default",children:"Don't Show Again This Month"})})]})})}},49573:(e,a,t)=>{t.d(a,{Fc:()=>l,TN:()=>c,XL:()=>d});var r=t(20475),s=t(20107),n=t(29395),o=t(22250);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,a)=>{let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,o.cn)(i({variant:s}),t),...n})});l.displayName="Alert";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h5",{ref:a,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})});d.displayName="AlertTitle";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",t),...s})});c.displayName="AlertDescription"},42541:(e,a,t)=>{t.d(a,{$:()=>d,r:()=>l});var r=t(20475),s=t(20107),n=t(61837),o=t(29395),i=t(22250);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:t,variant:s,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:t})),ref:a,...c})});d.displayName="Button"},72167:(e,a,t)=>{t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>i,wL:()=>u});var r=t(20475),s=t(20107),n=t(22250);let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});o.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},93557:(e,a,t)=>{t.d(a,{Cf:()=>f,Es:()=>h,HM:()=>u,L3:()=>p,c7:()=>m,lG:()=>l,rr:()=>x,zM:()=>d});var r=t(20475),s=t(20107),n=t(60241),o=t(7197),i=t(22250);let l=n.bL,d=n.l9,c=n.ZL,u=n.bm,g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});g.displayName=n.hJ.displayName;let f=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(n.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.MKb,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let m=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};m.displayName="DialogHeader";let h=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};h.displayName="DialogFooter";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=n.hE.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});x.displayName=n.VY.displayName},36760:(e,a,t)=>{t.d(a,{E:()=>n});var r=t(20475),s=t(22250);function n(e){let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",a),...t})}},85014:(e,a,t)=>{t.d(a,{TooltipProvider:()=>i,ZI:()=>c,k$:()=>d,m_:()=>l});var r=t(20475),s=t(20107),n=t(43048),o=t(22250);let i=n.Kq,l=n.bL,d=n.l9,c=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...i}=e;return(0,r.jsx)(n.UC,{ref:a,sideOffset:s,className:(0,o.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});c.displayName=n.UC.displayName},16028:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(20107),s=t(32857);let n=()=>{let[e,a]=(0,r.useState)({enabled:!1,monthlyLimit:0x280000000,backupInterval:12,autoBackupEnabled:!1,resetDay:1,warningThreshold:90,warningShown:!1,warningThresholdShown:!1,warningOverlimitShown:!1,lastBackup:0}),[t,n]=(0,r.useState)({upload:0,download:0,total:0}),[o,i]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),{toast:g}=(0,s.dj)(),f=(0,r.useCallback)(e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][a]},[]),m=(0,r.useCallback)(e=>0===e?"Never":new Date(1e3*e).toLocaleString(),[]),h=(0,r.useCallback)(()=>0===e.monthlyLimit?0:Math.min(t.total/e.monthlyLimit*100,100),[t.total,e.monthlyLimit]),p=(0,r.useCallback)(()=>{if(!e.enabled)return!1;let a=h();return a>=100&&!e.warningOverlimitShown||a>=e.warningThreshold&&!e.warningThresholdShown},[e.enabled,e.warningThresholdShown,e.warningOverlimitShown,e.warningThreshold,h]),x=(0,r.useCallback)(async()=>{try{d(null);let e=await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/config_manager.sh");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();a(t.config);let r=t.usage;try{let e=await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/fetch_realtime_usage.sh");if(e.ok){let a=await e.json();void 0===a.enabled||a.error?a.error&&console.warn("Real-time usage data error:",a.error):r={upload:a.upload||0,download:a.download||0,total:a.total||0}}}catch(e){console.warn("Real-time usage data unavailable, using stored data:",e)}if(n(r),t.config.enabled){let e=r.total/t.config.monthlyLimit*100;e>=100&&!t.config.warningOverlimitShown?u(!0):e>=t.config.warningThreshold&&!t.config.warningThresholdShown&&u(!0)}}catch(e){console.error("Error fetching data usage data:",e),d(e instanceof Error?e.message:"Failed to fetch data")}finally{i(!1)}},[]),y=(0,r.useCallback)(async t=>{try{d(null);let r="autoBackupEnabled"in t&&t.autoBackupEnabled!==e.autoBackupEnabled,s=await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/config_manager.sh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let n=await s.json();if(n.success){if(r)try{(await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/config_manager.sh?action=toggle_backup&enabled=".concat(t.autoBackupEnabled),{method:"GET"})).ok||console.warn("Failed to toggle backup service, but config was saved")}catch(e){console.warn("Error toggling backup service:",e)}return a(e=>({...e,...t})),g({title:"Success",description:"Configuration updated successfully"}),!0}throw Error(n.message||"Update failed")}catch(e){return console.error("Error updating configuration:",e),d(e instanceof Error?e.message:"Failed to update configuration"),g({title:"Error",description:"Failed to update configuration",variant:"destructive"}),!1}},[g,e.autoBackupEnabled]),v=(0,r.useCallback)(async()=>{try{d(null);let e=await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/config_manager.sh?action=reset");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();if(a.success)return n({upload:0,download:0,total:0}),u(!1),g({title:"Success",description:"Usage data reset successfully"}),!0;throw Error(a.message||"Reset failed")}catch(e){return console.error("Error resetting usage:",e),d(e instanceof Error?e.message:"Failed to reset usage data"),g({title:"Error",description:"Failed to reset usage data",variant:"destructive"}),!1}},[g]),w=(0,r.useCallback)(async()=>{try{d(null);let e=await fetch("/cgi-bin/quecmanager/experimental/data_usage_tracking/config_manager.sh?action=backup");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();if(a.success)return g({title:"Success",description:"Backup created successfully"}),!0;throw Error(a.message||"Backup failed")}catch(e){return console.error("Error creating backup:",e),d(e instanceof Error?e.message:"Failed to create backup"),g({title:"Error",description:"Failed to create backup",variant:"destructive"}),!1}},[g]),b=(0,r.useCallback)(async()=>{let a=h();a>=100?await y({warningOverlimitShown:!0}):a>=e.warningThreshold&&await y({warningThresholdShown:!0}),u(!1)},[y,h,e.warningThreshold]),N=(0,r.useCallback)(()=>{u(!1)},[]);return(0,r.useEffect)(()=>{let a;return x(),e.enabled&&(a=setInterval(x,66e3)),()=>{a&&clearInterval(a)}},[x,e.enabled]),(0,r.useEffect)(()=>{p()&&u(!0)},[p]),{config:e,usage:t,loading:o,error:l,showWarning:c,usagePercentage:h(),formattedUsage:{upload:f(t.upload),download:f(t.download),total:f(t.total)},formattedLimit:f(e.monthlyLimit),remaining:f(Math.max(0,e.monthlyLimit-t.total)),updateConfig:y,resetUsage:v,createBackup:w,dismissWarning:b,closeWarning:N,refresh:x,formatBytes:f,formatDate:m}}},32857:(e,a,t)=>{t.d(a,{dj:()=>g,oR:()=>u});var r=t(20107);let s=0,n=new Map,o=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function g(){let[e,a]=r.useState(d);return r.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,a,t)=>{t.d(a,{cn:()=>n});var r=t(64901),s=t(868);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}}}]);